(function(){var bx,aK=bx=aK||{version:"1.3.4"};aK.guid="$BAIDU$";window[aK.guid]=window[aK.guid]||{};aK.object=aK.object||{};aK.extend=aK.object.extend=function(ca,T){for(var b9 in T){if(T.hasOwnProperty(b9)){ca[b9]=T[b9]}}return ca};aK.dom=aK.dom||{};aK.dom.g=function(T){if("string"==typeof T||T instanceof String){return document.getElementById(T)}else{if(T&&T.nodeName&&(T.nodeType==1||T.nodeType==9)){return T}}return null};aK.g=aK.G=aK.dom.g;aK.dom.hide=function(T){T=aK.dom.g(T);T.style.display="none";return T};aK.hide=aK.dom.hide;aK.lang=aK.lang||{};aK.lang.isString=function(T){return"[object String]"==Object.prototype.toString.call(T)};aK.isString=aK.lang.isString;aK.dom._g=function(T){if(aK.lang.isString(T)){return document.getElementById(T)}return T};aK._g=aK.dom._g;aK.dom.contains=function(T,b9){var ca=aK.dom._g;T=ca(T);b9=ca(b9);return T.contains?T!=b9&&T.contains(b9):!!(T.compareDocumentPosition(b9)&16)};aK.browser=aK.browser||{};if(/msie (\d+\.\d)/i.test(navigator.userAgent)){aK.browser.ie=aK.ie=document.documentMode||+RegExp["\x241"]}aK.dom._NAME_ATTRS=(function(){var T={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(aK.browser.ie<8){T["for"]="htmlFor";T["class"]="className"}else{T.htmlFor="for";T.className="class"}return T})();aK.dom.setAttr=function(b9,T,ca){b9=aK.dom.g(b9);if("style"==T){b9.style.cssText=ca}else{T=aK.dom._NAME_ATTRS[T]||T;b9.setAttribute(T,ca)}return b9};aK.setAttr=aK.dom.setAttr;aK.dom.setAttrs=function(ca,T){ca=aK.dom.g(ca);for(var b9 in T){aK.dom.setAttr(ca,b9,T[b9])}return ca};aK.setAttrs=aK.dom.setAttrs;aK.string=aK.string||{};(function(){var T=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\x24)","g");aK.string.trim=function(b9){return String(b9).replace(T,"")}})();aK.trim=aK.string.trim;aK.dom.removeClass=function(cd,ce){cd=aK.dom.g(cd);var cb=cd.className.split(/\s+/),cf=ce.split(/\s+/),b9,T=cf.length,ca,cc=0;for(;cc<T;++cc){for(ca=0,b9=cb.length;ca<b9;++ca){if(cb[ca]==cf[cc]){cb.splice(ca,1);break}}}cd.className=cb.join(" ");return cd};aK.removeClass=aK.dom.removeClass;aK.dom.insertHTML=function(cb,T,ca){cb=aK.dom.g(cb);var b9,cc;if(cb.insertAdjacentHTML){cb.insertAdjacentHTML(T,ca)}else{b9=cb.ownerDocument.createRange();T=T.toUpperCase();if(T=="AFTERBEGIN"||T=="BEFOREEND"){b9.selectNodeContents(cb);b9.collapse(T=="AFTERBEGIN")}else{cc=T=="BEFOREBEGIN";b9[cc?"setStartBefore":"setEndAfter"](cb);b9.collapse(cc)}b9.insertNode(b9.createContextualFragment(ca))}return cb};aK.insertHTML=aK.dom.insertHTML;aK.dom.show=function(T){T=aK.dom.g(T);T.style.display="";return T};aK.show=aK.dom.show;aK.dom.getDocument=function(T){T=aK.dom.g(T);return T.nodeType==9?T:T.ownerDocument||T.document};aK.dom.addClass=function(cd,ce){cd=aK.dom.g(cd);var b9=ce.split(/\s+/),T=cd.className,cc=" "+T+" ",cb=0,ca=b9.length;for(;cb<ca;cb++){if(cc.indexOf(" "+b9[cb]+" ")<0){T+=" "+b9[cb]}}cd.className=T;return cd};aK.addClass=aK.dom.addClass;aK.dom._styleFixer=aK.dom._styleFixer||{};aK.dom._styleFilter=aK.dom._styleFilter||[];aK.dom._styleFilter.filter=function(b9,cc,cd){for(var T=0,cb=aK.dom._styleFilter,ca;ca=cb[T];T++){if(ca=ca[cd]){cc=ca(b9,cc)}}return cc};aK.string.toCamelCase=function(T){if(T.indexOf("-")<0&&T.indexOf("_")<0){return T}return T.replace(/[-_][^-_]/g,function(b9){return b9.charAt(1).toUpperCase()})};aK.dom.getStyle=function(ca,b9){var cd=aK.dom;ca=cd.g(ca);b9=aK.string.toCamelCase(b9);var cc=ca.style[b9];if(!cc){var T=cd._styleFixer[b9],cb=ca.currentStyle||(aK.browser.ie?ca.style:getComputedStyle(ca,null));cc=T&&T.get?T.get(ca,cb):cb[T||b9]}if(T=cd._styleFilter){cc=T.filter(b9,cc,"get")}return cc};aK.getStyle=aK.dom.getStyle;if(/opera\/(\d+\.\d)/i.test(navigator.userAgent)){aK.browser.opera=+RegExp["\x241"]}aK.browser.isWebkit=/webkit/i.test(navigator.userAgent);aK.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);aK.browser.isStrict=document.compatMode=="CSS1Compat";aK.dom.getPosition=function(T){T=aK.dom.g(T);var ch=aK.dom.getDocument(T),cb=aK.browser,ce=aK.dom.getStyle,ca=cb.isGecko>0&&ch.getBoxObjectFor&&ce(T,"position")=="absolute"&&(T.style.top===""||T.style.left===""),cf={left:0,top:0},cd=(cb.ie&&!cb.isStrict)?ch.body:ch.documentElement,ci,b9;if(T==cd){return cf}if(T.getBoundingClientRect){b9=T.getBoundingClientRect();cf.left=Math.floor(b9.left)+Math.max(ch.documentElement.scrollLeft,ch.body.scrollLeft);cf.top=Math.floor(b9.top)+Math.max(ch.documentElement.scrollTop,ch.body.scrollTop);cf.left-=ch.documentElement.clientLeft;cf.top-=ch.documentElement.clientTop;var cg=ch.body,cj=parseInt(ce(cg,"borderLeftWidth")),cc=parseInt(ce(cg,"borderTopWidth"));if(cb.ie&&!cb.isStrict){cf.left-=isNaN(cj)?2:cj;cf.top-=isNaN(cc)?2:cc}}else{ci=T;do{cf.left+=ci.offsetLeft;cf.top+=ci.offsetTop;if(cb.isWebkit>0&&ce(ci,"position")=="fixed"){cf.left+=ch.body.scrollLeft;cf.top+=ch.body.scrollTop;break}ci=ci.offsetParent}while(ci&&ci!=T);if(cb.opera>0||(cb.isWebkit>0&&ce(T,"position")=="absolute")){cf.top-=ch.body.offsetTop}ci=T.offsetParent;while(ci&&ci!=ch.body){cf.left-=ci.scrollLeft;if(!cb.opera||ci.tagName!="TR"){cf.top-=ci.scrollTop}ci=ci.offsetParent}}return cf};if(/firefox\/(\d+\.\d)/i.test(navigator.userAgent)){aK.browser.firefox=+RegExp["\x241"]}(function(){var T=navigator.userAgent;if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(T)&&!/chrome/i.test(T)){aK.browser.safari=+(RegExp["\x241"]||RegExp["\x242"])}})();if(/chrome\/(\d+\.\d)/i.test(navigator.userAgent)){aK.browser.chrome=+RegExp["\x241"]}aK.array=aK.array||{};aK.array.each=function(cd,cb){var ca,cc,b9,T=cd.length;if("function"==typeof cb){for(b9=0;b9<T;b9++){cc=cd[b9];ca=cb.call(cd,cc,b9);if(ca===false){break}}}return cd};aK.each=aK.array.each;aK.lang.guid=function(){return"TANGRAM__"+(window[aK.guid]._counter++).toString(36)};window[aK.guid]._counter=window[aK.guid]._counter||1;window[aK.guid]._instances=window[aK.guid]._instances||{};aK.lang.isFunction=function(T){return"[object Function]"==Object.prototype.toString.call(T)};aK.lang.Class=function(T){this.guid=T||aK.lang.guid();window[aK.guid]._instances[this.guid]=this};window[aK.guid]._instances=window[aK.guid]._instances||{};aK.lang.Class.prototype.dispose=function(){delete window[aK.guid]._instances[this.guid];for(var T in this){if(!aK.lang.isFunction(this[T])){delete this[T]}}this.disposed=true};aK.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};aK.lang.Event=function(T,b9){this.type=T;this.returnValue=true;this.target=b9||null;this.currentTarget=null};aK.lang.Class.prototype.addEventListener=function(cb,ca,b9){if(!aK.lang.isFunction(ca)){return}!this.__listeners&&(this.__listeners={});var T=this.__listeners,cc;if(typeof b9=="string"&&b9){if(/[^\w\-]/.test(b9)){throw ("nonstandard key:"+b9)}else{ca.hashCode=b9;cc=b9}}cb.indexOf("on")!=0&&(cb="on"+cb);typeof T[cb]!="object"&&(T[cb]={});cc=cc||aK.lang.guid();ca.hashCode=cc;T[cb][cc]=ca};aK.lang.Class.prototype.removeEventListener=function(ca,b9){if(aK.lang.isFunction(b9)){b9=b9.hashCode}else{if(!aK.lang.isString(b9)){return}}!this.__listeners&&(this.__listeners={});ca.indexOf("on")!=0&&(ca="on"+ca);var T=this.__listeners;if(!T[ca]){return}T[ca][b9]&&delete T[ca][b9]};aK.lang.Class.prototype.dispatchEvent=function(cb,T){if(aK.lang.isString(cb)){cb=new aK.lang.Event(cb)}!this.__listeners&&(this.__listeners={});T=T||{};for(var ca in T){cb[ca]=T[ca]}var ca,b9=this.__listeners,cc=cb.type;cb.target=cb.target||this;cb.currentTarget=this;cc.indexOf("on")!=0&&(cc="on"+cc);aK.lang.isFunction(this[cc])&&this[cc].apply(this,arguments);if(typeof b9[cc]=="object"){for(ca in b9[cc]){b9[cc][ca].apply(this,arguments)}}return cb.returnValue};aK.lang.Class.prototype.addEventListeners=function(ca,cb){if(typeof cb=="undefined"){for(var b9 in ca){this.addEventListener(b9,ca[b9])}}else{ca=ca.split(",");var b9=0,T=ca.length,cc;for(;b9<T;b9++){this.addEventListener(aK.trim(ca[b9]),cb)}}};aK.lang.inherits=function(ce,cc,cb){var ca,cd,T=ce.prototype,b9=new Function();b9.prototype=cc.prototype;cd=ce.prototype=new b9();for(ca in T){cd[ca]=T[ca]}ce.prototype.constructor=ce;ce.superClass=cc.prototype;if("string"==typeof cb){cd._className=cb}};aK.inherits=aK.lang.inherits;aK.lang.instance=function(T){return window[aK.guid]._instances[T]||null};aK.platform=aK.platform||{};aK.platform.isMacintosh=/macintosh/i.test(navigator.userAgent);aK.platform.isWindows=/windows/i.test(navigator.userAgent);aK.platform.isX11=/x11/i.test(navigator.userAgent);aK.platform.isAndroid=/android/i.test(navigator.userAgent);aK.platform.isIpad=/ipad/i.test(navigator.userAgent);aK.platform.isIphone=/iphone/i.test(navigator.userAgent);aK.lang.Event.prototype.inherit=function(ca){var b9=this;this.domEvent=ca=window.event||ca;b9.clientX=ca.clientX||ca.pageX;b9.clientY=ca.clientY||ca.pageY;b9.offsetX=ca.offsetX||ca.layerX;b9.offsetY=ca.offsetY||ca.layerY;b9.screenX=ca.screenX;b9.screenY=ca.screenY;b9.ctrlKey=ca.ctrlKey||ca.metaKey;b9.shiftKey=ca.shiftKey;b9.altKey=ca.altKey;if(ca.touches){b9.touches=[];for(var T=0;T<ca.touches.length;T++){b9.touches.push({clientX:ca.touches[T].clientX,clientY:ca.touches[T].clientY,screenX:ca.touches[T].screenX,screenY:ca.touches[T].screenY,pageX:ca.touches[T].pageX,pageY:ca.touches[T].pageY,target:ca.touches[T].target,identifier:ca.touches[T].identifier})}}if(ca.changedTouches){b9.changedTouches=[];for(var T=0;T<ca.changedTouches.length;T++){b9.changedTouches.push({clientX:ca.changedTouches[T].clientX,clientY:ca.changedTouches[T].clientY,screenX:ca.changedTouches[T].screenX,screenY:ca.changedTouches[T].screenY,pageX:ca.changedTouches[T].pageX,pageY:ca.changedTouches[T].pageY,target:ca.changedTouches[T].target,identifier:ca.changedTouches[T].identifier})}}if(ca.targetTouches){b9.targetTouches=[];for(var T=0;T<ca.targetTouches.length;T++){b9.targetTouches.push({clientX:ca.targetTouches[T].clientX,clientY:ca.targetTouches[T].clientY,screenX:ca.targetTouches[T].screenX,screenY:ca.targetTouches[T].screenY,pageX:ca.targetTouches[T].pageX,pageY:ca.targetTouches[T].pageY,target:ca.targetTouches[T].target,identifier:ca.targetTouches[T].identifier})}}b9.rotation=ca.rotation;b9.scale=ca.scale;return b9};aK.lang.decontrol=function(b9){var T=window[aK.guid];T._instances&&(delete T._instances[b9])};aK.event={};aK.on=aK.event.on=function(ca,b9,T){if(!(ca=aK.g(ca))){return ca}b9=b9.replace(/^on/,"").toLowerCase();if(ca.addEventListener){ca.addEventListener(b9,T,false)}else{if(ca.attachEvent){ca.attachEvent("on"+b9,T)}}return ca};aK.un=aK.event.un=function(ca,b9,T){if(!(ca=aK.g(ca))){return ca}b9=b9.replace(/^on/,"").toLowerCase();if(ca.removeEventListener){ca.removeEventListener(b9,T,false)}else{if(ca.detachEvent){ca.detachEvent("on"+b9,T)}}return ca};aK.dom.hasClass=function(ca,b9){if(!ca||!ca.className||typeof ca.className!="string"){return false}var T=-1;try{T=ca.className==b9||ca.className.search(new RegExp("(\\s|^)"+b9+"(\\s|$)"))}catch(cb){return false}return T>-1};var b2=b2||{version:"1.2",_register:new Array(),register:function(T){this._register[this._register.length]=T}};function a7(cb,cd){cb=aK.g(cb);if(!cb){return}var cc=this;aK.lang.Class.call(cc);cc.config={clickInterval:200,enableDragging:true,enableKeyboard:false,enableDblclickZoom:true,enableContinuousZoom:false,enableWheelZoom:false,enableMouseDown:true,enablePinchToZoom:true,fps:25,zoomerDuration:240,actionDuration:450,defaultCursor:bE.defaultCursor,draggingCursor:bE.draggingCursor,isOverviewMap:false,minZoom:1,maxZoom:18,mapType:BMAP_NORMAL_MAP,restrictBounds:false,drawer:BMAP_SYS_DRAWER,enableInertialDragging:false,drawMargin:500,enableHighResolution:false};aK.extend(cc.config,cd||{});if(cc.highResolutionEnabled()){var cf=document.querySelector("meta[name=viewport]");cf.content="initial-scale=0.5, user-scalable=no"}cc.container=cb;cc._setStyle(cb);cb.unselectable="on";cb.innerHTML="";cb.appendChild(cc.render());var b9=cc.getSize();cc.width=b9.width;cc.height=b9.height;cc.offsetX=0;cc.offsetY=0;cc.platform=cb.firstChild;cc.maskLayer=cc.platform.firstChild;cc._panes={};cc.centerPoint=new bF(0,0);cc.mercatorCenter=new bF(0,0);cc.zoomLevel=1;cc.lastLevel=0;cc.defaultZoomLevel=null;cc.defaultCenter=null;cc.currentCity="";cc.cityCode="";cc.currentOperation=0;if(cc.config.mapType===BMAP_PERSPECTIVE_MAP){_addStat(5002)}cd=cd||{};var ce=cc.mapType=cc.config.mapType;cc.projection=ce.getProjection();var T=cc.config;T.userMinZoom=cd.minZoom;T.userMaxZoom=cd.maxZoom;cc._checkZoom();cc.temp={operating:false,arrow:0,lastDomMoveTime:0,lastLoadTileTime:0,lastMovingTime:0,canKeyboard:false,registerIndex:-1};cc.platform.style.cursor=cc.config.defaultCursor;for(var ca=0;ca<b2._register.length;ca++){b2._register[ca](cc)}cc.temp.registerIndex=ca;var cc=this;bY.load("map",function(){cc._draw()});if(bl()){bY.load("oppc",function(){cc._asyncRegister()})}if(ai()){bY.load("opmb",function(){cc._asyncRegister()})}cb=null}aK.lang.inherits(a7,aK.lang.Class,"Map");aK.extend(a7.prototype,{render:function(){var T=N("div");var cb=T.style;cb.overflow="visible";cb.position="absolute";cb.zIndex="0";cb.top=cb.left="0px";var b9=N("div",{"class":"BMap_mask"});var ca=b9.style;ca.position="absolute";ca.top=ca.left="0px";ca.zIndex="9";ca.overflow="hidden";ca.WebkitUserSelect="none";T.appendChild(b9);return T},_setStyle:function(b9){var T=b9.style;T.overflow="hidden";if(ao(b9).position!="absolute"){T.position="relative"}T.backgroundColor="#f0f0f0";T.color="#000";T.textAlign="left"},_updateCenterPoint:function(cb,b9,cf,ce){var cc=this.getMapType().getZoomUnits(this.getZoom());var cg=this.projection;var cd=true;if(cf&&bF.isInRange(cf)){this.centerPoint=new bF(cf.lng,cf.lat);cd=false}var ca=(cf&&ce)?cg.lngLatToMercator(cf,this.currentCity):this.mercatorCenter;if(ca){this.mercatorCenter=new bF(ca.lng+cb*cc,ca.lat-b9*cc);var T=cg.mercatorToLngLat(this.mercatorCenter,this.currentCity);if(T&&cd){this.centerPoint=T}}},zoomTo:function(cb,b9){if(typeof cb!="number"){return}cb=this._getProperZoom(cb).zoom;if(cb==this.zoomLevel){return}this.lastLevel=this.zoomLevel;this.zoomLevel=cb;var ca;if(b9){ca=b9}else{if(this.getInfoWindow()){ca=this.getInfoWindow().getPosition()}}if(ca){var T=this.pointToPixel(ca,this.lastLevel);this._updateCenterPoint(this.width/2-T.x,this.height/2-T.y,this.pixelToPoint(T,this.lastLevel),true)}this.dispatchEvent(new aQ("onzoomstart"));this.dispatchEvent(new aQ("onzoomstartcode"))},setZoom:function(T){this.zoomTo(T)},zoomIn:function(T){this.zoomTo(this.zoomLevel+1,T)},zoomOut:function(T){this.zoomTo(this.zoomLevel-1,T)},panTo:function(T,b9){if(!(T instanceof bF)){return}this.mercatorCenter=this.projection.lngLatToMercator(T,this.currentCity);if(bF.isInRange(T)){this.centerPoint=new bF(T.lng,T.lat)}else{this.centerPoint=this.projection.mercatorToLngLat(this.mercatorCenter,this.currentCity)}},panBy:function(b9,T){b9=Math.round(b9)||0;T=Math.round(T)||0;this._updateCenterPoint(-b9,-T)},addControl:function(T){if(T&&B(T._i)){T._i(this);this.dispatchEvent(new aQ("onaddcontrol",T))}},removeControl:function(T){if(T&&B(T.remove)){T.remove();this.dispatchEvent(new aQ("onremovecontrol",T))}},addContextMenu:function(T){if(T&&B(T.initialize)){T.initialize(this);this.dispatchEvent(new aQ("onaddcontextmenu",T))}},removeContextMenu:function(T){if(T&&B(T.remove)){this.dispatchEvent(new aQ("onremovecontextmenu",T));T.remove()}},addOverlay:function(T){if(T&&B(T._i)){T._i(this);this.dispatchEvent(new aQ("onaddoverlay",T))}},removeOverlay:function(T){if(T&&B(T.remove)){T.remove();this.dispatchEvent(new aQ("onremoveoverlay",T))}},clearOverlays:function(){this.dispatchEvent(new aQ("onclearoverlays"))},addTileLayer:function(T){if(T&&B(T.initialize)){T.initialize(this);this.dispatchEvent(new aQ("onaddtilelayer",T))}},removeTileLayer:function(T){if(T&&B(T.remove)){T.remove();this.dispatchEvent(new aQ("onremovetilelayer",T))}},setMapType:function(b9){if(this.mapType===b9){return}var ca=new aQ("onsetmaptype");var T=this.mapType;ca.preMapType=T;this.mapType=this.config.mapType=b9;this.projection=this.mapType.getProjection();this._updateCenterPoint(0,0,this.getCenter(),true);this._checkZoom();var cb=this._getProperZoom(this.getZoom()).zoom;this.zoomTo(cb);this.dispatchEvent(ca);var ca=new aQ("onmaptypechange");ca.zoomLevel=cb;ca.mapType=b9;this.dispatchEvent(ca)},setCenter:function(T){var ca=this;if(T instanceof bF){ca.panTo(T,{noAnimation:true})}else{if(typeof T=="string"){var b9=this._getLocal();b9.setSearchCompleteCallback(function(cb){if(b9.getStatus()==0&&b9._json.result.type==2){ca.setCenter(cb.getPoi(0).point);if(BMAP_PERSPECTIVE_MAP.getCityName(T)){ca.setCurrentCity(T)}}});b9.search(T)}}},centerAndZoom:function(T,cb){var ca=this;if(typeof T=="string"){var cd=ca._getLocal();cd.setSearchCompleteCallback(function(ce){if(cd.getStatus()==0&&cd._json.result.type==2){var cg=ce.getPoi(0).point;var cf=cb||ad(cd._json.content.level,ca);ca.centerAndZoom(cg,cf);if(BMAP_PERSPECTIVE_MAP.getCityName(T)){ca.setCurrentCity(T)}}});cd.search(T);return}if(!(T instanceof bF)||!cb){return}cb=ca._getProperZoom(cb).zoom;var b9=ca.lastLevel;ca.lastLevel=ca.zoomLevel||cb;ca.zoomLevel=cb;ca.centerPoint=new bF(T.lng,T.lat);ca.mercatorCenter=ca.projection.lngLatToMercator(ca.centerPoint,ca.currentCity);ca.defaultZoomLevel=ca.defaultZoomLevel||ca.zoomLevel;ca.defaultCenter=ca.defaultCenter||ca.centerPoint;ca.loaded=true;var cc=new aQ("onload");cc.point=new bF(T.lng,T.lat);cc.pixel=ca.pointToPixel(ca.centerPoint,ca.zoomLevel);cc.zoom=cb;ca.dispatchEvent(cc);ca.dispatchEvent(new aQ("onmoveend"));if(b9!=ca.zoomLevel){ca.dispatchEvent(new aQ("onzoomend"))}},_getLocal:function(){if(!this.temp.local){this.temp.local=new aE("\u4e2d\u56fd")}return this.temp.local},reset:function(){this.centerAndZoom(this.defaultCenter,this.defaultZoomLevel,true)},enableDragging:function(){this.config.enableDragging=true},disableDragging:function(){this.config.enableDragging=false},enableInertialDragging:function(){this.config.enableInertialDragging=true},disableInertialDragging:function(){this.config.enableInertialDragging=false},enableScrollWheelZoom:function(){this.config.enableWheelZoom=true},disableScrollWheelZoom:function(){this.config.enableWheelZoom=false},enableContinuousZoom:function(){this.config.enableContinuousZoom=true},disableContinuousZoom:function(){this.config.enableContinuousZoom=false},enableDoubleClickZoom:function(){this.config.enableDblclickZoom=true},disableDoubleClickZoom:function(){this.config.enableDblclickZoom=false},enableKeyboard:function(){this.config.enableKeyboard=true},disableKeyboard:function(){this.config.enableKeyboard=false},enablePinchToZoom:function(){this.config.enablePinchToZoom=true},disablePinchToZoom:function(){this.config.enablePinchToZoom=false},getSize:function(){return new am(this.container.clientWidth,this.container.clientHeight)},getCenter:function(){return this.centerPoint},getZoom:function(){return this.zoomLevel},_getProperZoom:function(ca){var b9=this.config.minZoom,T=this.config.maxZoom,cb=false;if(ca<b9){cb=true;ca=b9}if(ca>T){cb=true;ca=T}return{zoom:ca,exceeded:cb}},getContainer:function(){return this.container},pointToPixel:function(T,b9){b9=b9||this.getZoom();return this.projection.pointToPixel(T,b9,this.mercatorCenter,this.getSize(),this.currentCity)},pixelToPoint:function(T,b9){b9=b9||this.getZoom();return this.projection.pixelToPoint(T,b9,this.mercatorCenter,this.getSize(),this.currentCity)},pointToOverlayPixel:function(T,ca){if(!T){return}var cb=new bF(T.lng,T.lat);var b9=this.pointToPixel(cb,ca);b9.x-=this.offsetX;b9.y-=this.offsetY;return b9},overlayPixelToPoint:function(T,ca){if(!T){return}var b9=new a4(T.x,T.y);b9.x+=this.offsetX;b9.y+=this.offsetY;return this.pixelToPoint(b9,ca)},getBounds:function(){if(!this.isLoaded()){return new bk()}var b9=arguments[0]||{},cb=b9.margins||[0,0,0,0],T=b9.zoom||null,cc=this.pixelToPoint({x:cb[3],y:this.height-cb[2]},T),ca=this.pixelToPoint({x:this.width-cb[1],y:cb[0]},T);return new bk(cc,ca)},isLoaded:function(){return !!this.loaded},_getBestLevel:function(b9,ca){var cd=this.getMapType();var cf=ca.margins||[10,10,10,10],cc=ca.zoomFactor||0,cg=cf[1]+cf[3],ce=cf[0]+cf[2],T=cd.getMinZoom(),ci=cd.getMaxZoom();for(var cb=ci;cb>=T;cb--){var ch=this.getMapType().getZoomUnits(cb);if(b9.toSpan().lng/ch<this.width-cg&&b9.toSpan().lat/ch<this.height-ce){break}}cb+=cc;if(cb<T){cb=T}if(cb>ci){cb=ci}return cb},getViewport:function(ci,T){var ck={center:this.getCenter(),zoom:this.getZoom()};if(!ci||ci.length==0){return ck}T=T||{};var cd=[];for(var ce=0,cc=ci.length;ce<cc;ce++){cd.push(this.projection.lngLatToMercator(ci[ce],this.currentCity))}var b9=new bk();for(var ce=cd.length-1;ce>=0;ce--){b9.extend(cd[ce])}if(b9.isEmpty()){return ck}var ca=b9.getCenter();var cj=this._getBestLevel(b9,T);if(T.margins){var cg=T.margins,cf=(cg[1]-cg[3])/2,ch=(cg[0]-cg[2])/2,cb=this.getMapType().getZoomUnits(cj);ca.lng=ca.lng+cb*cf;ca.lat=ca.lat+cb*ch}ca=this.projection.mercatorToLngLat(ca,this.currentCity);return{center:ca,zoom:cj}},setViewport:function(b9,cc){var T;if(b9&&b9.center){T=b9}else{T=this.getViewport(b9,cc)}cc=cc||{};var ca=cc.delay||200;if(T.zoom==this.zoomLevel&&cc.enableAnimation!=false){var cb=this;setTimeout(function(){cb.panTo(T.center,{duration:210})},ca)}else{this.centerAndZoom(T.center,T.zoom)}},getPanes:function(){return this._panes},getInfoWindow:function(){if(this.temp.infoWin&&this.temp.infoWin.isOpen()){return this.temp.infoWin}return null},getDistance:function(ca,T){if(!ca||!T){return}var b9=0;b9=aO.getDistanceByLL(ca,T);return b9},getOverlays:function(){var cb=[],cc=this._overlays,ca=this._customOverlays;if(cc){for(var b9 in cc){if(cc[b9] instanceof L){cb.push(cc[b9])}}}if(ca){for(var b9=0,T=ca.length;b9<T;b9++){cb.push(ca[b9])}}return cb},getMapType:function(){return this.mapType},_asyncRegister:function(){for(var T=this.temp.registerIndex;T<b2._register.length;T++){b2._register[T](this)}this.temp.registerIndex=T},setCurrentCity:function(T){this.currentCity=BMAP_PERSPECTIVE_MAP.getCityName(T);this.cityCode=BMAP_PERSPECTIVE_MAP.getCityCode(this.currentCity)},setDefaultCursor:function(T){this.config.defaultCursor=T;if(this.platform){this.platform.style.cursor=this.config.defaultCursor}},getDefaultCursor:function(){return this.config.defaultCursor},setDraggingCursor:function(T){this.config.draggingCursor=T},getDraggingCursor:function(){return this.config.draggingCursor},highResolutionEnabled:function(){return this.config.enableHighResolution&&window.devicePixelRatio>1},_checkZoom:function(){var b9=this.mapType.getMinZoom();var ca=this.mapType.getMaxZoom();var T=this.config;T.minZoom=T.userMinZoom||b9;T.maxZoom=T.userMaxZoom||ca;if(T.userMinZoom<b9){T.minZoom=b9}if(T.userMaxZoom>ca){T.maxZoom=ca}}});window.BMAP_API_VERSION="1.2";window.BMAP_COORD_LNGLAT=0;window.BMAP_COORD_MERCATOR=1;window.BMAP_SYS_DRAWER=0;window.BMAP_SVG_DRAWER=1;window.BMAP_VML_DRAWER=2;window.BMAP_CANVAS_DRAWER=3;window._addStat=function(cd,cc){if(!cd){return}cc=cc||{};var cb="";for(var b9 in cc){cb=cb+"&"+b9+"="+encodeURIComponent(cc[b9])}var ce=function(cf){if(!cf){return}_addStat._sending=true;setTimeout(function(){_addStat._img.src="http://api.map.baidu.com/images/blank.gif?"+cf.src},50)};var T=function(){var cf=_addStat._reqQueue.shift();if(cf){ce(cf)}};var ca=(Math.random()*100000000).toFixed(0);if(_addStat._sending){_addStat._reqQueue.push({src:"t="+ca+"&code="+cd+cb})}else{ce({src:"t="+ca+"&code="+cd+cb})}if(!_addStat._binded){aK.event.on(_addStat._img,"load",function(){_addStat._sending=false;T()});aK.event.on(_addStat._img,"error",function(){_addStat._sending=false;T()});_addStat._binded=true}};window._addStat._reqQueue=[];window._addStat._img=new Image();_addStat(5000);function f(cb){var T={duration:1000,fps:30,delay:0,transition:af.linear,onStop:function(){}};if(cb){for(var b9 in cb){T[b9]=cb[b9]}}this._opts=T;if(T.delay){var ca=this;setTimeout(function(){ca._beginTime=new Date().getTime();ca._endTime=ca._beginTime+ca._opts.duration;ca._launch()},T.delay)}else{this._beginTime=new Date().getTime();this._endTime=this._beginTime+this._opts.duration;this._launch()}}f.prototype._launch=function(){var b9=this;var T=new Date().getTime();if(T>=b9._endTime){if(typeof b9._opts.render=="function"){b9._opts.render(b9._opts.transition(1))}if(typeof b9._opts.finish=="function"){b9._opts.finish()}return}b9.schedule=b9._opts.transition((T-b9._beginTime)/b9._opts.duration);if(typeof b9._opts.render=="function"){b9._opts.render(b9.schedule)}if(!b9.terminative){b9._timer=setTimeout(function(){b9._launch()},1000/b9._opts.fps)}};f.prototype.stop=function(T){this.terminative=true;if(this._timer){clearTimeout(this._timer);this._timer=null}this._opts.onStop(this.schedule);if(T){this._endTime=this._beginTime;this._launch()}};f.prototype.cancel=function(){if(this._timer){clearTimeout(this._timer)}this._endTime=this._beginTime;this.schedule=0};var af={linear:function(T){return T},reverse:function(T){return 1-T},easeInQuad:function(T){return T*T},easeInCubic:function(T){return Math.pow(T,3)},easeOutQuad:function(T){return -(T*(T-2))},easeOutCubic:function(T){return Math.pow((T-1),3)+1},easeInOutQuad:function(T){if(T<0.5){return T*T*2}else{return -2*(T-2)*T-1}return},easeInOutCubic:function(T){if(T<0.5){return Math.pow(T,3)*4}else{return Math.pow(T-1,3)*4+1}},easeInOutSine:function(T){return(1-Math.cos(Math.PI*T))/2}};var bE={imgPath:"http://api.map.baidu.com/images/",cityNames:{"\u5317\u4eac":"bj","\u4e0a\u6d77":"sh","\u6df1\u5733":"sz","\u5e7f\u5dde":"gz"}};if(aK.browser.firefox){aK.object.extend(bE,{distCursor:"url("+bE.imgPath+"ruler.cur),crosshair",defaultCursor:"-moz-grab",draggingCursor:"-moz-grabbing"})}else{if(aK.browser.chrome||aK.browser.safari){aK.object.extend(bE,{distCursor:"url("+bE.imgPath+"ruler.cur) 2 6,crosshair",defaultCursor:"url("+bE.imgPath+"openhand.cur) 8 8,default",draggingCursor:"url("+bE.imgPath+"closedhand.cur) 8 8,move"})}else{aK.object.extend(bE,{distCursor:"url("+bE.imgPath+"ruler.cur),crosshair",defaultCursor:"url("+bE.imgPath+"openhand.cur),default",draggingCursor:"url("+bE.imgPath+"closedhand.cur),move"})}}function ae(ca,b9,T){this.id=ca;this.bounds=b9;this.content=T}var aW={undo:1,redo:2,zoom:4,drag:8,move:16,mousewheel:32,toolbarOperation:64,stdMapCtrlDrag:128,dblclick:256};function bf(ca,T){var b9=ca.style;b9.left=T[0]+"px";b9.top=T[1]+"px"}function bV(T){if(aK.browser.ie>0){T.unselectable="on";T.selectstart=function(){return false}}else{T.style.MozUserSelect="none"}}function u(T){return T&&T.parentNode&&T.parentNode.nodeType!=11}function ab(b9,T){aK.dom.insertHTML(b9,"beforeEnd",T);return b9.lastChild}function bu(T){var b9={left:0,top:0};while(T&&T.offsetParent){b9.left+=T.offsetLeft;b9.top+=T.offsetTop;T=T.offsetParent}return b9}function au(T){var T=window.event||T;T.stopPropagation?T.stopPropagation():T.cancelBubble=true}function b0(T){var T=window.event||T;T.preventDefault?T.preventDefault():T.returnValue=false;return false}function bN(T){au(T);return b0(T)}function b5(){var T=document.documentElement,b9=document.body;if(T&&(T.scrollTop||T.scrollLeft)){return[T.scrollTop,T.scrollLeft]}else{if(b9){return[b9.scrollTop,b9.scrollLeft]}else{return[0,0]}}}function bS(b9,T){if(!b9||!T){return}return Math.round(Math.sqrt(Math.pow(b9.x-T.x,2)+Math.pow(b9.y-T.y,2)))}function G(T,ca){var b9=[];ca=ca||function(cc){return cc};for(var cb in T){b9.push(cb+"="+ca(T[cb]))}return b9.join("&")}function N(b9,T,ca){var cb=document.createElement(b9);if(ca){cb=document.createElementNS(ca,b9)}return aK.dom.setAttrs(cb,T||{})}function ao(T){if(T.currentStyle){return T.currentStyle}else{if(T.ownerDocument&&T.ownerDocument.defaultView){return T.ownerDocument.defaultView.getComputedStyle(T,null)}}}function B(T){return typeof T=="function"}var bH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function br(cb){var b9="";var ci,cg,ce="";var ch,cf,cd,cc="";var ca=0;var T=/[^A-Za-z0-9\+\/\=]/g;if(!cb||T.exec(cb)){return cb}cb=cb.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{ch=bH.indexOf(cb.charAt(ca++));cf=bH.indexOf(cb.charAt(ca++));cd=bH.indexOf(cb.charAt(ca++));cc=bH.indexOf(cb.charAt(ca++));ci=(ch<<2)|(cf>>4);cg=((cf&15)<<4)|(cd>>2);ce=((cd&3)<<6)|cc;b9=b9+String.fromCharCode(ci);if(cd!=64){b9=b9+String.fromCharCode(cg)}if(cc!=64){b9=b9+String.fromCharCode(ce)}ci=cg=ce="";ch=cf=cd=cc=""}while(ca<cb.length);return b9}var aQ=aK.lang.Event;function ai(){return !!(aK.platform.isIphone||aK.platform.isIpad||aK.platform.isAndroid)}function bl(){return !!(aK.platform.isWindows||aK.platform.isMacintosh||aK.platform.isX11)}var bW={request:function(b9){var T=N("script",{src:b9,type:"text/javascript",charset:"utf-8"});if(T.addEventListener){T.addEventListener("load",function(cb){var ca=cb.target;ca.parentNode.removeChild(ca)},false)}else{if(T.attachEvent){T.attachEvent("onreadystatechange",function(cb){var ca=window.event.srcElement;if(ca&&(ca.readyState=="loaded"||ca.readyState=="complete")){ca.parentNode.removeChild(ca)}})}}setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(T);T=null},1)}};function bY(){}aK.object.extend(bY,{Request:{INITIAL:-1,WAITING:0,COMPLETED:1},Dependency:{control:[],marker:[],poly:["marker"],infowindow:["marker"],menu:[],oppc:[],opmb:[],scommon:[],local:["scommon"],route:["scommon"]},preLoaded:{},Config:{_baseUrl:"http://api.map.baidu.com/getmodules?v=1.2",_timeout:5000},delayFlag:false,Module:{_modules:{},_arrMdls:[]},load:function(b9,cb){var T=this.current(b9);if(T._status==this.Request.COMPLETED){return}else{if(T._status==this.Request.INITIAL){this.combine(b9);this.pushUniqueMdl(b9);var ca=this;if(ca.delayFlag==false){ca.delayFlag=true;window.setTimeout(function(){var cc=ca.Config._baseUrl+"&mod="+ca.Module._arrMdls.join(",");bW.request(cc);ca.Module._arrMdls.length=0;ca.delayFlag=false},1)}T._status=this.Request.WAITING}T._callbacks.push(cb)}},combine:function(T){if(T&&this.Dependency[T]){var ca=this.Dependency[T];for(var b9=0;b9<ca.length;b9++){this.combine(ca[b9]);if(!this.Module._modules[ca[b9]]){this.pushUniqueMdl(ca[b9])}}}},pushUniqueMdl:function(b9){for(var T=0;T<this.Module._arrMdls.length;T++){if(this.Module._arrMdls[T]==b9){return}}this.Module._arrMdls.push(b9)},run:function(ca,cc){var b9=this.current(ca);try{eval(cc)}catch(cd){return}b9._status=this.Request.COMPLETED;for(var cb=0,T=b9._callbacks.length;cb<T;cb++){b9._callbacks[cb]()}b9._callbacks.length=0},check:function(b9,ca){var T=this;T.timeout=setTimeout(function(){var cb=T.Module._modules[b9]._status;if(cb!=T.Request.COMPLETED){T.remove(b9);T.load(b9,ca)}else{clearTimeout(T.timeout)}},T.Config._timeout)},current:function(b9){var T;if(!this.Module._modules[b9]){this.Module._modules[b9]={};this.Module._modules[b9]._status=this.Request.INITIAL;this.Module._modules[b9]._callbacks=[]}T=this.Module._modules[b9];return T},remove:function(b9){var T=this.current(b9);delete T}});window._jsload=function(T,b9){bY.run(T,b9)};function a4(T,b9){T=isNaN(T)?0:T;b9=isNaN(b9)?0:b9;this.x=T;this.y=b9}a4.prototype.equals=function(T){if(!T){return false}return T.x==this.x&&T.y==this.y};a4.prototype.toString=function(){return"Pixel"};function am(b9,T){this.width=parseFloat(b9)||0;this.height=parseFloat(T)||0}am.prototype.equals=function(T){return !!(T&&this.width==T.width&&this.height==T.height)};am.prototype.toString=function(){return"Size"};function bO(){this._map=null;this._container;this._type="control";this.blockInfoWindow=true;this._visible=true}aK.lang.inherits(bO,aK.lang.Class,"Control");aK.object.extend(bO.prototype,{initialize:function(T){this._map=T;if(this._container){T.container.appendChild(this._container);return this._container}return},_i:function(T){if(!this._container&&this.initialize&&B(this.initialize)){this._container=this.initialize(T)}this._opts=this._opts||{printable:false};this._setStyle();this._setPosition();if(this._container){this._container._jsobj=this}},_setStyle:function(){var b9=this._container;if(b9){var T=b9.style;T.position="absolute";T.zIndex=this._cZIndex||"10";T.MozUserSelect="none";if(!this._opts.printable){aK.dom.addClass(b9,"BMap_noprint")}aK.event.on(b9,"contextmenu",bN)}},remove:function(){this._map=null;if(!this._container){return}this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container._jsobj=null;this._container=null},_render:function(){this._container=ab(this._map.container,"<div unselectable='on'></div>");if(this._visible==false){aK.dom.hide(this._container)}return this._container},_setPosition:function(){this.setAnchor(this._opts.anchor)},setAnchor:function(cb){if(this.anchorFixed||typeof cb!="number"||isNaN(cb)||cb<BMAP_ANCHOR_TOP_LEFT||cb>BMAP_ANCHOR_BOTTOM_RIGHT){cb=this.defaultAnchor}this._opts=this._opts||{printable:false};this._opts.offset=this._opts.offset||this.defaultOffset;var ca=this._opts.anchor;this._opts.anchor=cb;if(!this._container){return}var cd=this._container;var T=this._opts.offset.width;var cc=this._opts.offset.height;cd.style.left=cd.style.top=cd.style.right=cd.style.bottom="auto";switch(cb){case BMAP_ANCHOR_TOP_LEFT:cd.style.top=cc+"px";cd.style.left=T+"px";break;case BMAP_ANCHOR_TOP_RIGHT:cd.style.top=cc+"px";cd.style.right=T+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:cd.style.bottom=cc+"px";cd.style.left=T+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:cd.style.bottom=cc+"px";cd.style.right=T+"px";break;default:break}var b9=["TL","TR","BL","BR"];aK.dom.removeClass(this._container,"anchor"+b9[ca]);aK.dom.addClass(this._container,"anchor"+b9[cb])},getAnchor:function(){return this._opts.anchor},setOffset:function(T){if(!(T instanceof am)){return}this._opts=this._opts||{printable:false};this._opts.offset=new am(T.width,T.height);if(!this._container){return}this.setAnchor(this._opts.anchor)},getOffset:function(){return this._opts.offset},getDom:function(){return this._container},show:function(){if(this._visible==true){return}this._visible=true;if(this._container){aK.dom.show(this._container)}},hide:function(){if(this._visible==false){return}this._visible=false;if(this._container){aK.dom.hide(this._container)}},isPrintable:function(){return !!this._opts.printable},isVisible:function(){if(!this._container&&!this._map){return false}return !!this._visible}});window.BMAP_ANCHOR_TOP_LEFT=0;window.BMAP_ANCHOR_TOP_RIGHT=1;window.BMAP_ANCHOR_BOTTOM_LEFT=2;window.BMAP_ANCHOR_BOTTOM_RIGHT=3;window.BMAP_NAVIGATION_CONTROL_LARGE=0;window.BMAP_NAVIGATION_CONTROL_SMALL=1;window.BMAP_NAVIGATION_CONTROL_PAN=2;window.BMAP_NAVIGATION_CONTROL_ZOOM=3;function D(T){bO.call(this);T=T||{};this._opts={printable:false,showZoomInfo:true};aK.object.extend(this._opts,T);this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT;this.defaultOffset=new am(10,10);this.setAnchor(T.anchor);this.setType(T.type);this._asyncLoadCode()}aK.lang.inherits(D,bO,"NavigationControl");aK.extend(D.prototype,{initialize:function(T){this._map=T;return this._container},setType:function(T){if(typeof T=="number"&&T>=BMAP_NAVIGATION_CONTROL_LARGE&&T<=BMAP_NAVIGATION_CONTROL_ZOOM){this._opts.type=T}else{this._opts.type=BMAP_NAVIGATION_CONTROL_LARGE}},getType:function(){return this._opts.type},_asyncLoadCode:function(){var T=this;bY.load("control",function(){T._asyncDraw()})}});function X(T){bO.call(this);T=T||{};this._opts={printable:false};aK.object.extend(this._opts,T);this._copyrightCollection=[];this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT;this.defaultOffset=new am(5,2);this.setAnchor(T.anchor);this._canShow=true;this.blockInfoWindow=false;this._asyncLoadCode()}aK.lang.inherits(X,bO,"CopyrightControl");aK.object.extend(X.prototype,{initialize:function(T){this._map=T;return this._container},addCopyright:function(ca){if(!ca||typeof ca.id!="number"||isNaN(ca.id)){return}var T={bounds:null,content:""};for(var b9 in ca){T[b9]=ca[b9]}var cb=this.getCopyright(ca.id);if(cb){for(var cc in T){cb[cc]=T[cc]}}else{this._copyrightCollection.push(T)}},getCopyright:function(ca){for(var b9=0,T=this._copyrightCollection.length;b9<T;b9++){if(this._copyrightCollection[b9].id==ca){return this._copyrightCollection[b9]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(ca){for(var b9=0,T=this._copyrightCollection.length;b9<T;b9++){if(this._copyrightCollection[b9].id==ca){r=this._copyrightCollection.splice(b9,1);b9--;T=this._copyrightCollection.length}}},_asyncLoadCode:function(){var T=this;bY.load("control",function(){T._asyncDraw()})}});function b8(T){bO.call(this);T=T||{};this._opts={printable:false};this._opts=aK.extend(aK.extend(this._opts,{size:new am(150,150),padding:8,isOpen:false,zoomInterval:4}),T);this.defaultAnchor=BMAP_ANCHOR_BOTTOM_RIGHT;this.defaultOffset=new am(0,0);this._btnWidth=15;this._btnHeight=15;this.setAnchor(T.anchor);this.setSize(this._opts.size);this._asyncLoadCode()}aK.lang.inherits(b8,bO,"OverviewMapControl");aK.extend(b8.prototype,{initialize:function(T){this._map=T;return this._container},setAnchor:function(T){bO.prototype.setAnchor.call(this,T)},changeView:function(){this.changeView._running=true;this._opts.isOpen=!this._opts.isOpen;if(!this._container){this.changeView._running=false}},setSize:function(T){if(!(T instanceof am)){T=new am(150,150)}T.width=T.width>0?T.width:150;T.height=T.height>0?T.height:150;this._opts.size=T},getSize:function(){return this._opts.size},isOpen:function(){return this._opts.isOpen},_asyncLoadCode:function(){var T=this;bY.load("control",function(){T._asyncDraw()})}});function bh(T){bO.call(this);T=T||{};this._opts={printable:false};this._opts=aK.object.extend(aK.object.extend(this._opts,{color:"black",unit:"metric"}),T);this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT;this.defaultOffset=new am(81,18);this.setAnchor(T.anchor);this._units={metric:{name:"metric",conv:1,incon:1000,u1:"\u7c73",u2:"\u516c\u91cc"},us:{name:"us",conv:3.2808,incon:5280,u1:"\u82f1\u5c3a",u2:"\u82f1\u91cc"}};if(!this._units[this._opts.unit]){this._opts.unit="metric"}this._scaleText=null;this._numberArray={};this._asyncLoadCode()}window.BMAP_UNIT_METRIC="metric";window.BMAP_UNIT_IMPERIAL="us";aK.lang.inherits(bh,bO,"ScaleControl");aK.object.extend(bh.prototype,{initialize:function(T){this._map=T;return this._container},setColor:function(T){this._opts.color=T+""},getColor:function(){return this._opts.color},setUnit:function(T){this._opts.unit=this._units[T]&&this._units[T].name||this._opts.unit},getUnit:function(){return this._opts.unit},_asyncLoadCode:function(){var T=this;bY.load("control",function(){T._asyncDraw()})}});function ap(T){bO.call(this);T=T||{};this._opts={printable:false};this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT;this.defaultOffset=new am(10,10);this.setAnchor(T.anchor);this._opts=aK.object.extend(aK.object.extend(this._opts,{offset:this.defaultOffset,enableSwitch:true}),T);this._asyncLoadCode()}aK.lang.inherits(ap,bO,"MapTypeControl");aK.object.extend(ap.prototype,{initialize:function(T){this._map=T;return this._container},_asyncLoadCode:function(){var T=this;bY.load("control",function(){T._asyncDraw()})}});function bX(b9){aK.lang.Class.call(this);this._opts={container:null,cursor:"default"};this._opts=aK.object.extend(this._opts,b9);this._type="contextmenu";this._map=null;this._container;this._shadow;this._left=0;this._top=0;this._items=[];this._rItems=[];this._dividers=[];this.curPixel=null;this.curPoint=null;this._isOpen=false;var T=this;bY.load("menu",function(){T._draw()})}aK.lang.inherits(bX,aK.lang.Class,"ContextMenu");aK.object.extend(bX.prototype,{initialize:function(T){this._map=T},remove:function(){this._map=null},addItem:function(ca){if(!ca||ca._type!="menuitem"||ca._text==""||ca._width<=0){return}for(var b9=0,T=this._items.length;b9<T;b9++){if(this._items[b9]===ca){return}}this._items.push(ca);this._rItems.push(ca)},removeItem:function(ca){if(!ca||ca._type!="menuitem"){return}for(var b9=0,T=this._items.length;b9<T;b9++){if(this._items[b9]===ca){this._items[b9].remove();this._items.splice(b9,1);T--}}for(var b9=0,T=this._rItems.length;b9<T;b9++){if(this._rItems[b9]===ca){this._rItems[b9].remove();this._rItems.splice(b9,1);T--}}},addSeparator:function(){this._items.push({_type:"divider",_dIndex:this._dividers.length});this._dividers.push({dom:null})},removeSeparator:function(b9){if(!this._dividers[b9]){return}for(var ca=0,T=this._items.length;ca<T;ca++){if(this._items[ca]&&this._items[ca]._type=="divider"&&this._items[ca]._dIndex==b9){this._items.splice(ca,1);T--}if(this._items[ca]&&this._items[ca]._type=="divider"&&this._items[ca]._dIndex>b9){this._items[ca]._dIndex--}}this._dividers.splice(b9,1)},getDom:function(){return this._container},show:function(){if(this._isOpen==true){return}this._isOpen=true},hide:function(){if(this._isOpen==false){return}this._isOpen=false},setCursor:function(T){if(!T){return}this._opts.cursor=T},getItem:function(T){return this._rItems[T]}});function aP(ca,cb,b9){if(!ca||!cb||typeof cb!="function"){return}aK.lang.Class.call(this);this._opts={width:100,id:""};b9=b9||{};this._opts.width=(b9.width*1)?b9.width:100;this._opts.id=b9.id?b9.id:"";this._text=ca+"";this._callback=cb;this._map=null;this._type="menuitem";this._contextmenu=null;this._container=null;this._enabled=true;var T=this;bY.load("menu",function(){T._draw()})}aK.lang.inherits(aP,aK.lang.Class,"MenuItem");aK.object.extend(aP.prototype,{initialize:function(T,b9){this._map=T;this._contextmenu=b9},remove:function(){this._contextmenu=null;this._map=null},setText:function(T){if(!T){return}this._text=T+""},getDom:function(){return this._container},enable:function(){this._enabled=true},disable:function(){this._enabled=false}});function bk(T,b9){if(T&&!b9){b9=T}this._sw=this._ne=null;this._swLng=this._swLat=null;this._neLng=this._neLat=null;if(T){this._sw=new bF(T.lng,T.lat);this._ne=new bF(b9.lng,b9.lat);this._swLng=T.lng;this._swLat=T.lat;this._neLng=b9.lng;this._neLat=b9.lat}}aK.object.extend(bk.prototype,{isEmpty:function(){return(!this._sw||!this._ne)},equals:function(T){if(!(T instanceof bk)||this.isEmpty()){return false}return this.getSouthWest().equals(T.getSouthWest())&&this.getNorthEast().equals(T.getNorthEast())},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},containsBounds:function(T){if(!(T instanceof bk)||this.isEmpty()||T.isEmpty()){return false}return(T._swLng>this._swLng&&T._neLng<this._neLng&&T._swLat>this._swLat&&T._neLat<this._neLat)},getCenter:function(){if(this.isEmpty()){return null}return new bF((this._swLng+this._neLng)/2,(this._swLat+this._neLat)/2)},intersects:function(ca){if(!(ca instanceof bk)){return null}if(Math.max(ca._swLng,ca._neLng)<Math.min(this._swLng,this._neLng)||Math.min(ca._swLng,ca._neLng)>Math.max(this._swLng,this._neLng)||Math.max(ca._swLat,ca._neLat)<Math.min(this._swLat,this._neLat)||Math.min(ca._swLat,ca._neLat)>Math.max(this._swLat,this._neLat)){return null}var cc=Math.max(this._swLng,ca._swLng);var b9=Math.min(this._neLng,ca._neLng);var cb=Math.max(this._swLat,ca._swLat);var T=Math.min(this._neLat,ca._neLat);return new bk(new bF(cc,cb),new bF(b9,T))},containsPoint:function(T){if(!(T instanceof bF)||this.isEmpty()){return false}return(T.lng>=this._swLng&&T.lng<=this._neLng&&T.lat>=this._swLat&&T.lat<=this._neLat)},extend:function(T){if(!(T instanceof bF)){return}var b9=T.lng,ca=T.lat;if(!this._sw){this._sw=new bF(0,0)}if(!this._ne){this._ne=new bF(0,0)}if(!this._swLng||this._swLng>b9){this._sw.lng=this._swLng=b9}if(!this._neLng||this._neLng<b9){this._ne.lng=this._neLng=b9}if(!this._swLat||this._swLat>ca){this._sw.lat=this._swLat=ca}if(!this._neLat||this._neLat<ca){this._ne.lat=this._neLat=ca}},toSpan:function(){if(this.isEmpty()){return new bF(0,0)}return new bF(Math.abs(this._neLng-this._swLng),Math.abs(this._neLat-this._swLat))},toString:function(){return"Bounds"}});function bF(T,b9){if(isNaN(T)){T=br(T);T=isNaN(T)?0:T}if(typeof T=="string"){T=parseFloat(T)}if(isNaN(b9)){b9=br(b9);b9=isNaN(b9)?0:b9}if(typeof b9=="string"){b9=parseFloat(b9)}this.lng=T;this.lat=b9}bF.isInRange=function(T){return T&&T.lng<=180&&T.lng>=-180&&T.lat<=74&&T.lat>=-74};var aH=bF.prototype;aH.equals=function(T){if(!(T instanceof bF)){return false}return(this.lat==T.lat&&this.lng==T.lng)};aH.toString=function(){return"Point"};function aO(T){this._mapType=T}aK.extend(aO,{EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,0.00000898305509648872,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-0.03801003308653,17337981.2],[-7.435856389565537e-9,0.000008983055097726239,-0.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,0.00000898305509983578,0.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,0.32710905363475,6856817.37],[-1.981981304930552e-8,0.000008983055099779535,0.03278182852591,40.31678527705744,0.65659298677277,-4.44255534477492,0.85341911805263,0.12923347998204,-0.04625736007561,4482777.06],[3.09191371068437e-9,0.000008983055096812155,0.00006995724062,23.10934304144901,-0.00023663490511,-0.6321817810242,-0.00663494467273,0.03430082397953,-0.00466043876332,2555164.4],[2.890871144776878e-9,0.000008983055095805407,-3.068298e-8,7.47137025468032,-0.00000353937994,-0.02145144861037,-0.00001234426596,0.00010322952773,-0.00000323890364,826088.5]],LL2MC:[[-0.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[0.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[0.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[0.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-0.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-0.0003218135878613132,111320.7020701615,0.00369383431289,823725.6402795718,0.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,0.37238884252424,7.45]],getDistanceByMC:function(cd,cb){if(typeof(cd)=="undefined"||typeof(cb)=="undefined"){return 0}var b9,cc,T,ca;cd=this.convertMC2LL(cd);if(typeof(cd)=="undefined"){return 0}b9=this.toRadians(cd.lng);cc=this.toRadians(cd.lat);cb=this.convertMC2LL(cb);if(typeof(cb)=="undefined"){return 0}T=this.toRadians(cb.lng);ca=this.toRadians(cb.lat);return this.getDistance(b9,T,cc,ca)},getDistanceByLL:function(cd,cb){if(typeof(cd)=="undefined"||typeof(cb)=="undefined"){return 0}cd.lng=this.getLoop(cd.lng,-180,180);cd.lat=this.getRange(cd.lat,-74,74);cb.lng=this.getLoop(cb.lng,-180,180);cb.lat=this.getRange(cb.lat,-74,74);var b9,T,cc,ca;b9=this.toRadians(cd.lng);cc=this.toRadians(cd.lat);T=this.toRadians(cb.lng);ca=this.toRadians(cb.lat);return this.getDistance(b9,T,cc,ca)},convertMC2LL:function(b9){var ca,cc;ca=new bF(Math.abs(b9.lng),Math.abs(b9.lat));for(var cb=0;cb<this.MCBAND.length;cb++){if(ca.lat>=this.MCBAND[cb]){cc=this.MC2LL[cb];break}}var T=this.convertor(b9,cc);var b9=new bF(T.lng.toFixed(6),T.lat.toFixed(6));return b9},convertLL2MC:function(T){var b9,cb;T.lng=this.getLoop(T.lng,-180,180);T.lat=this.getRange(T.lat,-74,74);b9=new bF(T.lng,T.lat);for(var ca=0;ca<this.LLBAND.length;ca++){if(b9.lat>=this.LLBAND[ca]){cb=this.LL2MC[ca];break}}if(!cb){for(var ca=this.LLBAND.length-1;ca>=0;ca--){if(b9.lat<=-this.LLBAND[ca]){cb=this.LL2MC[ca];break}}}var cc=this.convertor(T,cb);var T=new bF(cc.lng.toFixed(2),cc.lat.toFixed(2));return T},convertor:function(ca,cb){if(!ca||!cb){return}var T=cb[0]+cb[1]*Math.abs(ca.lng);var b9=Math.abs(ca.lat)/cb[9];var cc=cb[2]+cb[3]*b9+cb[4]*b9*b9+cb[5]*b9*b9*b9+cb[6]*b9*b9*b9*b9+cb[7]*b9*b9*b9*b9*b9+cb[8]*b9*b9*b9*b9*b9*b9;T*=(ca.lng<0?-1:1);cc*=(ca.lat<0?-1:1);return new bF(T,cc)},getDistance:function(b9,T,cb,ca){return this.EARTHRADIUS*Math.acos((Math.sin(cb)*Math.sin(ca)+Math.cos(cb)*Math.cos(ca)*Math.cos(T-b9)))},toRadians:function(T){return Math.PI*T/180},toDegrees:function(T){return(180*T)/Math.PI},getRange:function(ca,b9,T){if(b9!=null){ca=Math.max(ca,b9)}if(T!=null){ca=Math.min(ca,T)}return ca},getLoop:function(ca,b9,T){while(ca>T){ca-=T-b9}while(ca<b9){ca+=T-b9}return ca}});aK.extend(aO.prototype,{lngLatToMercator:function(T){return aO.convertLL2MC(T)},mercatorToLngLat:function(T){return aO.convertMC2LL(T)},pointToPixel:function(b9,cd,cc,cb,ce){if(!b9){return}b9=this.lngLatToMercator(b9,ce);var ca=this.getMapType().getZoomUnits(cd);var T=Math.round((b9.lng-cc.lng)/ca+cb.width/2);var cf=Math.round((cc.lat-b9.lat)/ca+cb.height/2);return new a4(T,cf)},pixelToPoint:function(T,cg,cc,ca,b9){if(!T){return}var cf=this.getMapType().getZoomUnits(cg);var cd=cc.lng+cf*(T.x-ca.width/2);var cb=cc.lat-cf*(T.y-ca.height/2);var ce=new bF(cd,cb);return this.mercatorToLngLat(ce,b9)},getMapType:function(){return this._mapType}});function b3(T){this._mapType=T}b3.prototype=new aO();aK.extend(b3.prototype,{lngLatToMercator:function(b9,T){return this._convert2DTo3D(T,aO.convertLL2MC(b9))},mercatorToLngLat:function(b9,T){return aO.convertMC2LL(this._convert3DTo2D(T,b9))},_convert2DTo3D:function(ca,T){var b9=bz.getOMap_pts(ca||"bj",T);return new bF(b9.x,b9.y)},_convert3DTo2D:function(ca,T){var b9=bz.getMapJw_pts(ca||"bj",T);return new bF(b9.lng,b9.lat)}});function bz(){}aK.extend(bz,{num:{bj:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/6)},gz:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/4)},sz:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/4)},sh:{num:Math.sin(Math.PI/4),num2:Math.sin(Math.PI/4)}},correct_pts:{bj:[{j:116.305687,w:39.990912,utm_x:12947230.73,utm_y:4836903.65,x:630412,y:547340},{j:116.381837,w:40.000198,utm_x:12955707.8,utm_y:4838247.62,x:667412,y:561832},{j:116.430651,w:39.995216,utm_x:12961141.81,utm_y:4837526.55,x:686556,y:573372},{j:116.474111,w:39.976323,utm_x:12965979.81,utm_y:4834792.55,x:697152,y:586816},{j:116.280328,w:39.953159,utm_x:12944407.75,utm_y:4831441.53,x:603272,y:549976},{j:116.316117,w:39.952496,utm_x:12948391.8,utm_y:4831345.64,x:618504,y:557872},{j:116.350477,w:39.938107,utm_x:12952216.78,utm_y:4829264.65,x:627044,y:568220},{j:116.432025,w:39.947158,utm_x:12961294.76,utm_y:4830573.59,x:666280,y:584016},{j:116.46873,w:39.949516,utm_x:12965380.79,utm_y:4830914.63,x:683328,y:591444},{j:116.280077,w:39.913823,utm_x:12944379.8,utm_y:4825753.62,x:586150,y:558552},{j:116.308625,w:39.91374,utm_x:12947557.79,utm_y:4825741.62,x:598648,y:564732},{j:116.369853,w:39.912979,utm_x:12954373.73,utm_y:4825631.62,x:624561,y:578039},{j:116.433552,w:39.914694,utm_x:12961464.75,utm_y:4825879.53,x:652972,y:591348},{j:116.457034,w:39.914273,utm_x:12964078.78,utm_y:4825818.67,x:663028,y:596444},{j:116.490927,w:39.914127,utm_x:12967851.77,utm_y:4825797.57,x:677968,y:604188},{j:116.483839,w:39.877198,utm_x:12967062.73,utm_y:4820460.67,x:658596,y:610312},{j:116.405777,w:39.864461,utm_x:12958372.82,utm_y:4818620.62,x:619256,y:596088},{j:116.35345,w:39.859774,utm_x:12952547.74,utm_y:4817943.6,x:594633,y:585851},{j:116.403818,w:39.9141,utm_x:12958154.74,utm_y:4825793.66,x:639699,y:585226},{j:116.318111,w:39.891101,utm_x:12948613.78,utm_y:4822469.56,x:592856,y:571480},{j:116.413047,w:39.907238,utm_x:12959182.12,utm_y:4824801.76,x:640680,y:588704},{j:116.390843,w:39.906113,utm_x:12956710.35,utm_y:4824639.16,x:630620,y:584108},{j:116.446527,w:39.899438,utm_x:12962909.14,utm_y:4823674.4,x:651752,y:597416},{j:116.388665,w:39.95527,utm_x:12956467.9,utm_y:4831746.87,x:650656,y:572800},{j:116.398343,w:39.939704,utm_x:12957545.26,utm_y:4829495.6,x:648036,y:578452},{j:116.355101,w:39.973581,utm_x:12952731.53,utm_y:4834395.82,x:643268,y:560944},{j:116.380727,w:39.88464,utm_x:12955584.23,utm_y:4821535.94,x:616920,y:586496},{j:116.360843,w:39.946452,utm_x:12953370.73,utm_y:4830471.48,x:635293,y:568765},{j:116.340955,w:39.973421,utm_x:12951156.79,utm_y:4834372.67,x:638420,y:558632},{j:116.322585,w:40.023941,utm_x:12949111.83,utm_y:4841684.79,x:652135,y:543802},{j:116.356486,w:39.883341,utm_x:12952885.71,utm_y:4821348.24,x:606050,y:581443},{j:116.339592,w:39.992259,utm_x:12951005.06,utm_y:4837098.59,x:645664,y:554400},{j:116.3778,w:39.86392,utm_x:12955258.4,utm_y:4818542.48,x:606848,y:590328},{j:116.377354,w:39.964124,utm_x:12955208.75,utm_y:4833027.64,x:649911,y:568581},{j:116.361837,w:39.963897,utm_x:12953481.39,utm_y:4832994.8,x:643286,y:565175},{j:116.441397,w:39.939403,utm_x:12962338.06,utm_y:4829452.07,x:666772,y:587728},{j:116.359176,w:40.006631,utm_x:12953185.16,utm_y:4839178.78,x:660440,y:555411}],sz:[{j:113.88099,w:22.58884,utm_x:12677311.76,utm_y:2565810.52,x:569078,y:532290},{j:113.902002,w:22.566098,utm_x:12679650.83,utm_y:2563084.58,x:568318,y:545457},{j:113.869843,w:22.577711,utm_x:12676070.87,utm_y:2564476.5,x:561115,y:532494},{j:113.943387,w:22.555192,utm_x:12684257.84,utm_y:2561777.5,x:579437,y:558427},{j:113.899505,w:22.577052,utm_x:12679372.86,utm_y:2564397.51,x:571923,y:540181},{j:113.900376,w:22.596431,utm_x:12679469.82,utm_y:2566720.51,x:580142,y:535463},{j:113.92101,w:22.528931,utm_x:12681766.81,utm_y:2558630.58,x:560296,y:559780},{j:113.919672,w:22.517839,utm_x:12681617.86,utm_y:2557301.57,x:555296,y:562549},{j:113.938716,w:22.505569,utm_x:12683737.86,utm_y:2555831.55,x:557349,y:571072},{j:113.919203,w:22.483494,utm_x:12681565.66,utm_y:2553187.17,x:540853,y:572118},{j:113.942875,w:22.492046,utm_x:12684200.84,utm_y:2554211.57,x:553296,y:575994},{j:113.9567,w:22.530183,utm_x:12685739.85,utm_y:2558780.59,x:573378,y:568442},{j:113.989102,w:22.52697,utm_x:12689346.86,utm_y:2558395.61,x:584796,y:578728},{j:114.015467,w:22.533746,utm_x:12692281.83,utm_y:2559207.53,x:597126,y:584075},{j:113.972977,w:22.55702,utm_x:12687551.81,utm_y:2561996.58,x:591204,y:565924},{j:113.990368,w:22.561133,utm_x:12689487.79,utm_y:2562489.51,x:599240,y:569528},{j:114.143745,w:22.580535,utm_x:12706561.83,utm_y:2564815,x:663830,y:605622},{j:114.150374,w:22.557704,utm_x:12707299.77,utm_y:2562078.56,x:657016,y:613828},{j:114.106905,w:22.541858,utm_x:12702460.77,utm_y:2560179.58,x:634284,y:606528},{j:114.083927,w:22.535065,utm_x:12699902.85,utm_y:2559365.58,x:623132,y:602096},{j:114.049584,w:22.517997,utm_x:12696079.76,utm_y:2557320.5,x:603390,y:597564},{j:114.056304,w:22.542425,utm_x:12696827.84,utm_y:2560247.52,x:615980,y:592534},{j:114.051552,w:22.551321,utm_x:12696298.84,utm_y:2561313.59,x:617887,y:588719},{j:114.096377,w:22.559064,utm_x:12701288.79,utm_y:2562241.55,x:637568,y:598739},{j:114.135858,w:22.575851,utm_x:12705683.84,utm_y:2564253.55,x:659024,y:604806},{j:114.092029,w:22.575592,utm_x:12700804.77,utm_y:2564222.51,x:642776,y:592932},{j:114.054795,w:22.570617,utm_x:12696659.85,utm_y:2563626.21,x:626988,y:584142},{j:114.03075,w:22.553687,utm_x:12693983.15,utm_y:2561597.14,x:611068,y:582552},{j:114.074153,w:22.554124,utm_x:12698814.8,utm_y:2561649.51,x:627380,y:594008},{j:113.926721,w:22.546028,utm_x:12682402.56,utm_y:2560679.29,x:569340,y:556468},{j:113.938125,w:22.538296,utm_x:12683672.07,utm_y:2559752.74,x:570548,y:561748}],gz:[{j:113.335098,w:23.147289,utm_x:12616542.68,utm_y:2632892.7,x:1129109,y:1073920},{j:113.320932,w:23.146956,utm_x:12614965.71,utm_y:2632852.62,x:1125620,y:1071640},{j:113.321435,w:23.140119,utm_x:12615021.7,utm_y:2632029.65,x:1124032,y:1072882},{j:113.321471,w:23.119165,utm_x:12615025.71,utm_y:2629507.68,x:1118932,y:1076530},{j:113.340201,w:23.118616,utm_x:12617110.75,utm_y:2629441.61,x:1123238,y:1079667},{j:113.358068,w:23.116323,utm_x:12619099.71,utm_y:2629165.66,x:1126968,y:1083116},{j:113.357529,w:23.131271,utm_x:12619039.71,utm_y:2630964.68,x:1130508,y:1080440},{j:113.365811,w:23.150595,utm_x:12619961.67,utm_y:2633290.66,x:1137205,y:1078567},{j:113.294145,w:23.118467,utm_x:12611983.76,utm_y:2629423.68,x:1112245,y:1072043},{j:113.28615,w:23.121525,utm_x:12611093.75,utm_y:2629791.7,x:1110993,y:1070197},{j:113.307152,w:23.055497,utm_x:12613431.71,utm_y:2621847.21,x:1100144,y:1085123},{j:113.333445,w:23.052687,utm_x:12616358.66,utm_y:2621509.2,x:1105784,y:1089948},{j:113.347476,w:23.048755,utm_x:12617920.6,utm_y:2621036.24,x:1108099,y:1093064},{j:113.385774,w:23.036574,utm_x:12622183.96,utm_y:2619571.12,x:1113850,y:1101834},{j:113.364185,w:22.89798,utm_x:12619780.66,utm_y:2602910.64,x:1073186,y:1123374},{j:113.404577,w:22.906481,utm_x:12624277.13,utm_y:2603932.06,x:1084888,y:1128692},{j:113.430856,w:22.913156,utm_x:12627202.52,utm_y:2604734.12,x:1092892,y:1131761},{j:113.384554,w:22.933021,utm_x:12622048.15,utm_y:2607121.32,x:1086975,y:1120403},{j:113.263566,w:23.146333,utm_x:12608579.68,utm_y:2632777.63,x:1111742,y:1062098},{j:113.239213,w:23.152996,utm_x:12605868.69,utm_y:2633579.69,x:1107616,y:1056740},{j:113.253865,w:23.131628,utm_x:12607499.76,utm_y:2631007.65,x:1105912,y:1062966},{j:113.240767,w:23.088434,utm_x:12606041.68,utm_y:2625809.7,x:1092270,y:1068184},{j:113.279628,w:23.088284,utm_x:12610367.72,utm_y:2625791.65,x:1101412,y:1074883},{j:113.462271,w:23.107058,utm_x:12630699.66,utm_y:2628050.7,x:1148752,y:1101736},{j:113.401618,w:23.052957,utm_x:12623947.73,utm_y:2621541.68,x:1121925,y:1101535},{j:113.422504,w:23.05905,utm_x:12626272.77,utm_y:2622274.61,x:1128470,y:1104049},{j:113.362506,w:23.107149,utm_x:12619593.75,utm_y:2628061.65,x:1125835,y:1085505},{j:113.419629,w:23.143176,utm_x:12625952.73,utm_y:2632397.61,x:1148133,y:1089052},{j:113.23315,w:23.062251,utm_x:12605193.75,utm_y:2622659.67,x:1084184,y:1071368},{j:113.314525,w:23.101412,utm_x:12614252.48,utm_y:2627371.29,x:1113011,y:1078426},{j:113.307947,w:23.131369,utm_x:12613520.21,utm_y:2630976.47,x:1118622,y:1072198}],sh:[{j:121.524411,w:31.245875,utm_x:13528182.75,utm_y:3642354.51,x:1086581,y:1065728},{j:121.419229,w:31.244887,utm_x:13516473.81,utm_y:3642226.51,x:1032616,y:1029148},{j:121.405637,w:31.237871,utm_x:13514960.74,utm_y:3641317.54,x:1022724,y:1027244},{j:121.415348,w:31.222879,utm_x:13516041.78,utm_y:3639375.47,x:1018548,y:1036980},{j:121.422561,w:31.224261,utm_x:13516844.73,utm_y:3639554.48,x:1022976,y:1038908},{j:121.412581,w:31.204148,utm_x:13515733.75,utm_y:3636949.48,x:1006568,y:1043696},{j:121.443025,w:31.206202,utm_x:13519122.8,utm_y:3637215.49,x:1022656,y:1053704},{j:121.524061,w:31.246917,utm_x:13528143.79,utm_y:3642489.52,x:1082052,y:1064124},{j:121.529343,w:31.217769,utm_x:13528731.78,utm_y:3638713.59,x:1072696,y:1079064},{j:121.530268,w:31.210341,utm_x:13528834.75,utm_y:3637751.53,x:1068748,y:1082416},{j:121.511601,w:31.227303,utm_x:13526756.73,utm_y:3639948.53,x:1069276,y:1068716},{j:121.4966,w:31.243614,utm_x:13525086.81,utm_y:3642061.58,x:1071220,y:1056805},{j:121.485021,w:31.26138,utm_x:13523797.82,utm_y:3644363.54,x:1075708,y:1045540},{j:121.465114,w:31.278803,utm_x:13521581.76,utm_y:3646621.48,x:1073740,y:1031268},{j:121.454784,w:31.266566,utm_x:13520431.82,utm_y:3645035.58,x:1063591,y:1033191},{j:121.46851,w:31.24951,utm_x:13521959.81,utm_y:3642825.48,x:1060200,y:1044520},{j:121.446384,w:31.248422,utm_x:13519496.73,utm_y:3642684.51,x:1048784,y:1037750},{j:121.509499,w:31.246469,utm_x:13526522.73,utm_y:3642431.47,x:1079309,y:1060105},{j:121.481643,w:31.283943,utm_x:13523421.78,utm_y:3647287.68,x:1087096,y:1035304},{j:121.508054,w:31.280609,utm_x:13526361.87,utm_y:3646855.56,x:1098432,y:1045648},{j:121.493854,w:31.19121,utm_x:13524781.12,utm_y:3635274.07,x:1039624,y:1077288},{j:121.500079,w:31.185541,utm_x:13525474.09,utm_y:3634540.04,x:1039960,y:1081640},{j:121.484482,w:31.202846,utm_x:13523737.82,utm_y:3636780.87,x:1041388,y:1069232},{j:121.480877,w:31.189587,utm_x:13523336.51,utm_y:3635063.92,x:1032484,y:1073640},{j:121.502652,w:31.195209,utm_x:13525760.52,utm_y:3635791.9,x:1046384,y:1078728}]},getLnglatIndex:function(cb,cf,ce){var ca=0;var b9=0;var cg=10000000,cd=1000000000;for(var cc=0;cc<this.correct_pts[cb].length;cc++){var T=this.getDis(this.correct_pts[cb][cc].x,this.correct_pts[cb][cc].y,cf,ce);if(T<cd){if(T<cg){cd=cg;cg=T;b9=ca;ca=cc}else{sedMinDis=T;b9=cc}}}return{lt:ca,rb:b9}},getOMapIndex_mm:function(cb,cg,cf){var ca=0;var b9=0;var ce=1294723000,cd=1294723000;for(var cc=0;cc<this.correct_pts[cb].length;cc++){var T=this.getDis(this.correct_pts[cb][cc].utm_x,this.correct_pts[cb][cc].utm_y,cg,cf);if(T<cd){if(T<ce){cd=ce;ce=T;b9=ca;ca=cc}else{sedMinDis=T;b9=cc}}}return{lt:ca,rb:b9}},getDis:function(T,cb,b9,ca){return Math.abs(T-b9)+Math.abs(cb-ca)},toMap:function(cb,T,cc){var b9=(T-cc)*this.num[cb].num;var ca=(T+cc)*this.num[cb].num*this.num[cb].num2;return{x:b9,y:ca}},fromMap:function(cb,T,cc){cc=cc/this.num[cb].num2;var b9=(T+cc)/(this.num[cb].num*2);var ca=(cc-T)/(this.num[cb].num*2);return{x:b9,y:ca}},getDgPix_mm:function(cc,ch,cd){var cg=this.fromMap(cc,this.correct_pts[cc][ch].x,this.correct_pts[cc][ch].y);var ce=this.fromMap(cc,this.correct_pts[cc][cd].x,this.correct_pts[cc][cd].y);var cm=cg.x,b9=cg.y;var cl=ce.x,T=ce.y;var cj=this.correct_pts[cc][ch].utm_x,cb=this.correct_pts[cc][ch].utm_y;var cf=this.correct_pts[cc][cd].utm_x,ca=this.correct_pts[cc][cd].utm_y;var ck=Math.abs((cf-cj)*100000/(cl-cm));var ci=Math.abs((ca-cb)*100000/(T-b9));return{j:ck,w:ci,x:100000/ck,y:100000/ci}},getPx_mm:function(cp,cl,ck,cc,cb){var ca=this.correct_pts[cp][cc];var T=this.correct_pts[cp][cc];var ci=this.getDgPix_mm(cp,cc,cb);var ce=this.fromMap(cp,ca.x,ca.y);var cd=T.utm_x,cr=T.utm_y;var cq=cl,cj=ck;var co=ce.x;var b9=ce.y;var cg=cq-cd,cn=cj-cr;var ch=cg*ci.x+co;var cf=-cn*ci.y+b9;var cm=this.toMap(cp,ch,cf);return cm},getJw_mm:function(cn,ci,ch,cd,cc){var cg=this.correct_pts[cn][cd];var b9=this.correct_pts[cn][cd];var cj=this.getDgPix_mm(cn,cd,cc);var cl=this.fromMap(cn,ci,ch);var cb=this.fromMap(cn,cg.x,cg.y);var ce=b9.utm_x,co=b9.utm_y;var cm=cb.x;var ca=cb.y;var cp=cl.x-cm,ck=ca-cl.y;var cf=cp/cj.x+ce;var T=ck/cj.y+co;return{lng:cf,lat:T}},getOMap_pts:function(b9,T){return this.getOMap_index(b9,T.lng,T.lat,T.lt,T.rb)},getMapJw_pts:function(b9,T){return this.getMapJw_index(b9,T.lng,9998336-T.lat,T.lt,T.rb)},getOMap_index:function(ce,cd,cc,T,cb){if(!T||!cb){var b9=this.getOMapIndex_mm(ce,cd,cc)}else{var b9={lt:T,rb:cb}}var ca=this.getPx_mm(ce,cd,cc,b9.lt,b9.rb);return{x:Math.floor(ca.x),y:9998336-Math.floor(ca.y),lt:b9.lt,rb:b9.rb}},getMapJw_index:function(cd,ca,ce,b9,cc){if(!b9||!cc){var cb=this.getLnglatIndex(cd,ca,ce)}else{var cb={lt:b9,rb:cc}}var T=this.getJw_mm(cd,ca,ce,cb.lt,cb.rb);return{lng:T.lng,lat:T.lat,lt:cb.lt,rb:cb.rb}}});function be(){this._type="overlay"}aK.lang.inherits(be,aK.lang.Class,"Overlay");be.getZIndex=function(T){T=T*1;if(!T){return 0}return(T*-100000)<<1};aK.extend(be.prototype,{_i:function(T){if(!this.domElement&&B(this.initialize)){this.domElement=this.initialize(T);if(this.domElement){this.domElement.style.WebkitUserSelect="none"}}this.draw()},initialize:function(T){throw"initialize\u65b9\u6cd5\u672a\u5b9e\u73b0"},draw:function(){throw"draw\u65b9\u6cd5\u672a\u5b9e\u73b0"},remove:function(){if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement)}this.domElement=null;this.dispatchEvent(new aQ("onremove"))},hide:function(){if(this.domElement){aK.dom.hide(this.domElement)}},show:function(){if(this.domElement){aK.dom.show(this.domElement)}},isVisible:function(){if(!this.domElement){return false}if(this.domElement.style.display=="none"||this.domElement.style.visibility=="hidden"){return false}return true}});b2.register(function(b9){b9.temp.overlayDiv=b9.overlayDiv=T(b9.platform,200);b9._panes.floatPane=T(b9.temp.overlayDiv,800);b9._panes.markerMouseTarget=T(b9.temp.overlayDiv,700);b9._panes.floatShadow=T(b9.temp.overlayDiv,600);b9._panes.labelPane=T(b9.temp.overlayDiv,500);b9._panes.markerPane=T(b9.temp.overlayDiv,400);b9._panes.mapPane=T(b9.temp.overlayDiv,200);function T(ca,cd){var cc=N("div"),cb=cc.style;cb.position="absolute";cb.top=cb.left=cb.width=cb.height="0";cb.zIndex=cd;ca.appendChild(cc);return cc}});function L(){aK.lang.Class.call(this);be.call(this);this._visible=true;this.infoWindow=null;this._dblclickTime=0}aK.lang.inherits(L,be,"OverlayInternal");aK.extend(L.prototype,{initialize:function(T){this.map=T;aK.lang.Class.call(this,this.guid);return null},draw:function(){},remove:function(){this.map=null;aK.lang.decontrol(this.guid);be.prototype.remove.call(this)},hide:function(){if(this._visible==false){return}this._visible=false},show:function(){if(this._visible==true){return}this._visible=true},isVisible:function(){if(!this.domElement){return false}return !!this._visible},getContainer:function(){return this.domElement},setConfig:function(b9){b9=b9||{};for(var T in b9){this._config[T]=b9[T]}},setZIndex:function(T){this.zIndex=T},enableMassClear:function(){this._config.enableMassClear=true},disableMassClear:function(){this._config.enableMassClear=false}});function bR(){this.map=null;this._overlays={};this._customOverlays=[]}b2.register(function(b9){var T=new bR();T.map=b9;b9._overlays=T._overlays;b9._customOverlays=T._customOverlays;b9.addEventListener("load",function(ca){T.draw(ca)});b9.addEventListener("moveend",function(ca){T.draw(ca)});if(aK.browser.ie&&aK.browser.ie<8||document.compatMode=="BackCompat"){b9.addEventListener("zoomend",function(ca){setTimeout(function(){T.draw(ca)},20)})}else{b9.addEventListener("zoomend",function(ca){T.draw(ca)})}b9.addEventListener("maptypechange",function(ca){T.draw(ca)});b9.addEventListener("addoverlay",function(ce){var cb=ce.target;if(cb instanceof L){if(!T._overlays[cb.guid]){T._overlays[cb.guid]=cb}}else{var cd=false;for(var cc=0,ca=T._customOverlays.length;cc<ca;cc++){if(T._customOverlays[cc]===cb){cd=true;break}}if(!cd){T._customOverlays.push(cb)}}});b9.addEventListener("removeoverlay",function(cd){var cb=cd.target;if(cb instanceof L){delete T._overlays[cb.guid]}else{for(var cc=0,ca=T._customOverlays.length;cc<ca;cc++){if(T._customOverlays[cc]===cb){T._customOverlays.splice(cc,1);break}}}});b9.addEventListener("clearoverlays",function(cd){this.closeInfoWindow();for(var cc in T._overlays){if(T._overlays[cc]._config.enableMassClear){T._overlays[cc].remove();delete T._overlays[cc]}}for(var cb=0,ca=T._customOverlays.length;cb<ca;cb++){if(T._customOverlays[cb].enableMassClear!=false){T._customOverlays[cb].remove();T._customOverlays[cb]=null;T._customOverlays.splice(cb,1);cb--;ca--}}});b9.addEventListener("infowindowopen",function(cb){var ca=this.infoWindow;if(ca){aK.dom.hide(ca.popDom);aK.dom.hide(ca.shadowDom)}});b9.addEventListener("movestart",function(){if(this.getInfoWindow()){this.getInfoWindow()._setOverflow()}});b9.addEventListener("moveend",function(){if(this.getInfoWindow()){this.getInfoWindow()._resetOverflow()}})});bR.prototype.draw=function(ca){for(var b9 in this._overlays){this._overlays[b9].draw()}aK.array.each(this._customOverlays,function(cb){cb.draw()});if(this.map.temp.infoWin){this.map.temp.infoWin.setPosition()}if(b2.DrawerSelector){var T=b2.DrawerSelector.getDrawer(this.map);T.setPalette()}};function b4(T){L.call(this);this._config={strokeColor:"#3a6bdb",strokeWeight:5,strokeOpacity:0.65,strokeStyle:"solid",enableMassClear:true,getParseTolerance:null,getParseCacheIndex:null,enableEditing:false,mouseOverTolerance:15,use3DCoords:false,clickable:true};this.setConfig(T);if(this._config.strokeWeight<=0){this._config.strokeWeight=5}if(this._config.strokeOpacity<0||this._config.strokeOpacity>1){this._config.strokeOpacity=0.65}if(this._config.fillOpacity<0||this._config.fillOpacity>1){this._config.fillOpacity=0.65}if(this._config.strokeStyle!="solid"&&this._config.strokeStyle!="dashed"){this._config.strokeStyle="solid"}this.domElement=null;this._bounds=new b2.Bounds(0,0,0,0);this._parseCache=[];this.vertexMarkers=[];this._temp={}}aK.lang.inherits(b4,L,"Graph");b4.getGraphPoints=function(b9){var T=[];if(!b9){return T}if(typeof b9=="string"){var ca=b9.split(";");aK.array.each(ca,function(cc){var cb=cc.split(",");T.push(new bF(cb[0],cb[1]))})}if(b9.constructor==Array&&b9.length>0){T=b9}return T};b4.parseTolerance=[0.09,0.005,0.0001,0.00001];aK.extend(b4.prototype,{initialize:function(T){this.map=T;return null},draw:function(){return;if(!this.domElement){return}if(this._drawer){this._drawer.setPath(this.domElement,this._getDisplayPixels(this.points))}},setPath:function(T){this._parseCache.length=0;this.points=b4.getGraphPoints(T).slice(0);this._calcBounds()},_calcBounds:function(){if(!this.points){return}var T=this;T._bounds=new bk();aK.array.each(this.points,function(b9){T._bounds.extend(b9)})},getPath:function(){return this.points},setPositionAt:function(b9,T){if(!T||!this.points[b9]){return}this._parseCache.length=0;this.points[b9]=new bF(T.lng,T.lat);this._calcBounds()},setStrokeColor:function(T){this._config.strokeColor=T},getStrokeColor:function(){return this._config.strokeColor},setStrokeWeight:function(T){if(T>0){this._config.strokeWeight=T}},getStrokeWeight:function(){return this._config.strokeWeight},setStrokeOpacity:function(T){if(!T||T>1||T<0){return}this._config.strokeOpacity=T},getStrokeOpacity:function(){return this._config.strokeOpacity},setFillOpacity:function(T){if(T>1||T<0){return}this._config.fillOpacity=T},getFillOpacity:function(){return this._config.fillOpacity},setStrokeStyle:function(T){if(T!="solid"&&T!="dashed"){return}this._config.strokeStyle=T},getStrokeStyle:function(){return this._config.strokeStyle},setFillColor:function(T){this._config.fillColor=T||""},getFillColor:function(){return this._config.fillColor},getBounds:function(){return this._bounds},remove:function(){if(this.map){this.map.removeEventListener("onmousemove",this._graphMouseEvent)}L.prototype.remove.call(this);this._parseCache.length=0},enableEditing:function(){this._config.enableEditing=true},disableEditing:function(){this._config.enableEditing=false}});function k(T){L.call(this);this.map=null;this.domElement=null;this._config={width:0,height:0,offset:new am(0,0),opacity:1,background:"transparent",lineStroke:1,lineColor:"#000",lineStyle:"solid",point:null};this.setConfig(T);this.point=this._config.point}aK.lang.inherits(k,L,"Division");aK.extend(k.prototype,{_addDom:function(){var T=this._config;var ca=this.content;var b9=['<div class="BMap_Division" style="position:absolute;'];b9.push("width:"+T.width+"px;display:block;");b9.push("overflow:hidden;");if(T.borderColor!="none"){b9.push("border:"+T.lineStroke+"px "+T.lineStyle+" "+T.lineColor+";")}b9.push("opacity:"+T.opacity+"; filter:(opacity="+T.opacity*100+")");b9.push("background:"+T.background+";");b9.push('z-index:60;">');b9.push(ca);b9.push("</div>");this.domElement=ab(this.map.getPanes().markerMouseTarget,b9.join(""))},initialize:function(T){this.map=T;this._addDom();if(this.domElement){aK.event.on(this.domElement,"mousedown",function(b9){au(b9)})}return this.domElement},draw:function(){var T=this.map.pointToOverlayPixel(this._config.point);this._config.offset=new am(-Math.round(this._config.width/2)-Math.round(this._config.lineStroke),-Math.round(this._config.height/2)-Math.round(this._config.lineStroke));this.domElement.style.left=T.x+this._config.offset.width+"px";this.domElement.style.top=T.y+this._config.offset.height+"px"},getPosition:function(){return this._config.point},_getPixel:function(T){return this.map.pointToPixel(this.getPosition())},setPosition:function(T){this._config.point=T;this.draw()},setDimension:function(T,b9){this._config.width=Math.round(T);this._config.height=Math.round(b9);if(this.domElement){this.domElement.style.width=this._config.width+"px";this.domElement.style.height=this._config.height+"px";this.draw()}}});function E(b9,ca,cb){if(!b9||!ca){return}this.imageUrl=b9;this.size=ca;var T=new am(Math.floor(ca.width/2),Math.floor(ca.height/2));var cc={anchor:T,imageOffset:new am(0,0)};cb=cb||{};aK.extend(cc,cb);this.anchor=cc.anchor;this.imageOffset=cc.imageOffset;this.infoWindowAnchor=cb.infoWindowAnchor||this.anchor;this.printImageUrl=cb.printImageUrl||""}var bb=E.prototype;bb.setImageUrl=function(T){if(!T){return}this.imageUrl=T};bb.setPrintImageUrl=function(T){if(!T){return}this.printImageUrl=T};bb.setSize=function(T){if(!T){return}this.size=new am(T.width,T.height)};bb.setAnchor=function(T){if(!T){return}this.anchor=new am(T.width,T.height)};bb.setImageOffset=function(T){if(!T){return}this.imageOffset=new am(T.width,T.height)};bb.setInfoWindowAnchor=function(T){if(!T){return}this.infoWindowAnchor=new am(T.width,T.height)};bb.toString=function(){return"Icon"};function bm(ca,b9){aK.lang.Class.call(this);this.content=ca;this.map=null;this._config={width:0,height:0,maxWidth:600,offset:new am(0,0),title:"",maxContent:"",enableMaximize:false,enableAutoPan:true,enableCloseOnClick:true,margin:[10,10,40,10],collisions:[[10,10],[10,10],[10,10],[10,10]],ifMaxScene:false,onClosing:function(){return true}};aK.extend(this._config,b9||{});if(this._config.width!=0){if(this._config.width<220){this._config.width=220}if(this._config.width>730){this._config.width=730}}if(this._config.height!=0){if(this._config.height<60){this._config.height=60}if(this._config.height>650){this._config.height=650}}if(this._config.maxWidth!=0){if(this._config.maxWidth<220){this._config.maxWidth=220}if(this._config.maxWidth>730){this._config.maxWidth=730}}this.isWinMax=false;this.IMG_PATH=bE.imgPath;this.overlay=null;var T=this;bY.load("infowindow",function(){T._draw()})}aK.lang.inherits(bm,aK.lang.Class,"InfoWindow");aK.extend(bm.prototype,{setWidth:function(T){if(!T&&T!=0||isNaN(T)||T<0){return}if(T!=0){if(T<220){T=220}if(T>730){T=730}}this._config.width=T},setHeight:function(T){if(!T&&T!=0||isNaN(T)||T<0){return}if(T!=0){if(T<60){T=60}if(T>650){T=650}}this._config.height=T},setMaxWidth:function(T){if(!T&&T!=0||isNaN(T)||T<0){return}if(T!=0){if(T<220){T=220}if(T>730){T=730}}this._config.maxWidth=T},setTitle:function(T){this._config.title=T||""},setContent:function(T){this.content=T||""},setMaxContent:function(T){this._config.maxContent=T||""},redraw:function(){},enableAutoPan:function(){this._config.enableAutoPan=true},disableAutoPan:function(){this._config.enableAutoPan=false},enableCloseOnClick:function(){this._config.enableCloseOnClick=true},disableCloseOnClick:function(){this._config.enableCloseOnClick=false},enableMaximize:function(){this._config.enableMaximize=true},disableMaximize:function(){this._config.enableMaximize=false},show:function(){this._visible=true},hide:function(){this._visible=false},close:function(){this.hide()},maximize:function(){this.isWinMax=true},restore:function(){this.isWinMax=false},isVisible:function(){return this.isOpen()},isOpen:function(){return false},getPosition:function(){if(this.overlay&&this.overlay.getPosition){return this.overlay.getPosition()}},getOffset:function(){return this._config.offset}});a7.prototype.openInfoWindow=function(cb,T){if(!(cb instanceof bm)||!(T instanceof bF)){return}var b9=this.temp;if(!b9.marker){var ca=new E(bE.imgPath+"blank.gif",{width:1,height:1});b9.marker=new Q(T,{icon:ca,width:1,height:1,offset:new am(0,0),infoWindowOffset:new am(0,0),clickable:false});b9.marker._fromMap=1}else{b9.marker.setPosition(T)}this.addOverlay(b9.marker);b9.marker.openInfoWindow(cb)};a7.prototype.closeInfoWindow=function(){var T=this.temp.infoWin||this.temp._infoWin;if(T&&T.overlay){T.overlay.closeInfoWindow()}};L.prototype.openInfoWindow=function(T){if(this.map){this.map.closeInfoWindow();T._visible=true;this.map.temp._infoWin=T;T.overlay=this;aK.lang.Class.call(T,T.guid)}};L.prototype.closeInfoWindow=function(){if(this.map&&this.map.temp._infoWin){this.map.temp._infoWin._visible=false;aK.lang.decontrol(this.map.temp._infoWin.guid);this.map.temp._infoWin=null}};function R(ca,b9){L.call(this);this.content=ca;this.map=null;this.domElement=null;this._config={width:0,offset:new am(0,0),styles:{backgroundColor:"#fff",border:"1px solid #f00",padding:"1px",whiteSpace:"nowrap",font:"12px arial,simsun",zIndex:"80",MozUserSelect:"none"},position:null,enableMassClear:true,clickable:true};b9=b9||{};this.setConfig(b9);if(this._config.width<0){this._config.width=0}this.point=this._config.position;var T=this;bY.load("marker",function(){T._draw()})}aK.lang.inherits(R,L,"Label");aK.extend(R.prototype,{getPosition:function(){if(this._marker){return this._marker.getPosition()}return this.point},setPosition:function(T){if(T instanceof bF&&!this.getMarker()){this.point=this._config.position=new bF(T.lng,T.lat)}},setContent:function(T){this.content=T},setOpacity:function(T){if(T>=0&&T<=1){this._config.opacity=T}},setOffset:function(T){if(!(T instanceof am)){return}this._config.offset=new am(T.width,T.height)},getOffset:function(){return this._config.offset},setStyle:function(T){T=T||{};this._config.styles=aK.extend(this._config.styles,T)},setStyles:function(T){return this.setStyle(T)},setTitle:function(T){this._config.title=T||""},getTitle:function(){return this._config.title},setMarker:function(T){this._marker=T;if(T){this.point=this._config.position=T.getPosition()}else{this.point=this._config.position=null}},getMarker:function(){return this._marker||null}});var ac=new E(bE.imgPath+"marker_red.png",new am(23,25),{anchor:new am(10,25),infoWindowAnchor:new am(10,0)});function Q(T,ca){L.call(this);ca=ca||{};this.point=T;this.map=null;this.domElement=null;this.iconDom=null;this.siblingElement=null;this._config={offset:new am(0,0),icon:null,title:"",label:null,baseZIndex:0,clickable:true,zIndexFixed:false,isTop:false,enableMassClear:true,enableDragging:false,restrictDraggingArea:false};this.setConfig(ca);if(!ca.icon){this._config.icon=ac}this._isDragging=false;var b9=this;bY.load("marker",function(){b9._draw()})}Q.TOP_ZINDEX=be.getZIndex(-90)+1000000;Q.DRAG_ZINDEX=Q.TOP_ZINDEX+1000000;aK.lang.inherits(Q,L,"Marker");aK.extend(Q.prototype,{setIcon:function(T){if(T instanceof E){this._config.icon=T}},getIcon:function(){return this._config.icon},setLabel:function(T){this._config.label=T||null},getLabel:function(){return this._config.label},enableDragging:function(){this._config.enableDragging=true},disableDragging:function(){this._config.enableDragging=false},getPosition:function(){return this.point},setPosition:function(T){if(T instanceof bF){this.point=new bF(T.lng,T.lat)}},setTop:function(b9,T){this._config.isTop=!!b9;if(b9){this._addi=T||0}},setTitle:function(T){this._config.title=T||""},getTitle:function(){return this._config.title},setOffset:function(T){if(T instanceof am){this._config.offset=T}},getOffset:function(){return this._config.offset}});function bM(T,ca){b4.call(this,ca);ca=ca||{};this._config.fillOpacity=ca.fillOpacity?ca.fillOpacity:0.65;if(ca.fillColor==""){this._config.fillColor=""}else{this._config.fillColor=ca.fillColor?ca.fillColor:"#fff"}this.setPath(T);var b9=this;bY.load("poly",function(){b9._draw()})}aK.lang.inherits(bM,b4,"Polygon");aK.extend(bM.prototype,{setPath:function(b9,T){this._userPoints=b4.getGraphPoints(b9).slice(0);var ca=b4.getGraphPoints(b9).slice(0);if(ca.length>1&&!ca[0].equals(ca[ca.length-1])){ca.push(new bF(ca[0].lng,ca[0].lat))}b4.prototype.setPath.call(this,ca,T)},setPositionAt:function(b9,T){if(!this._userPoints[b9]){return}this._userPoints[b9]=new bF(T.lng,T.lat);this.points[b9]=new bF(T.lng,T.lat);if(b9==0&&!this.points[0].equals(this.points[this.points.length-1])){this.points[this.points.length-1]=new bF(T.lng,T.lat)}this._calcBounds()},getPath:function(){var T=this._userPoints;if(T.length==0){T=this.points}return T}});function e(T,ca){b4.call(this,ca);this.setPath(T);var b9=this;bY.load("poly",function(){b9._draw()})}aK.lang.inherits(e,b4,"Polyline");function a(b9,T,ca){this.point=b9;this.radius=Math.abs(T);bM.call(this,[],ca)}a.parseTolerance=[0.01,0.0001,0.00001,0.000004];aK.lang.inherits(a,bM,"Circle");aK.extend(a.prototype,{initialize:function(T){this.map=T;this.points=this._getPerimeterPoints(this.point,this.radius);this._calcBounds();return null},getCenter:function(){return this.point},setCenter:function(T,b9){if(!T){return}this.point=T},getRadius:function(){return this.radius},setRadius:function(T){this.radius=Math.abs(T)},_getPerimeterPoints:function(T,cg){if(!T||!cg||!this.map){return[]}var b9=this.map;var cd=T.lng,cb=T.lat;var cn=[];var ci=cg/6378800,cf=(Math.PI/180)*cb,cl=(Math.PI/180)*cd;for(var ce=0;ce<360;ce+=9){var cc=(Math.PI/180)*ce,cj=Math.asin(Math.sin(cf)*Math.cos(ci)+Math.cos(cf)*Math.sin(ci)*Math.cos(cc)),ch=Math.atan2(Math.sin(cc)*Math.sin(ci)*Math.cos(cf),Math.cos(ci)-Math.sin(cf)*Math.sin(cj)),ck=((cl-ch+Math.PI)%(2*Math.PI))-Math.PI,cm=new bF(ck*(180/Math.PI),cj*(180/Math.PI));cn.push(cm)}var ca=cn[0];cn.push(new bF(ca.lng,ca.lat));return cn}});function bn(T){this.map=T;this.mapTypeLayers=[];this.tileLayers=[];this.bufferNumber=300;this.realBufferNumber=0;this.mapTiles={};this.bufferTiles={}}b2.register(function(b9){var T=new bn(b9);T.initialize()});aK.extend(bn.prototype,{initialize:function(){var T=this,b9=T.map;b9.addEventListener("load",function(){T.loadTiles()});b9.addEventListener("addtilelayer",function(ca){T.addTileLayer(ca)});b9.addEventListener("removetilelayer",function(ca){T.removeTileLayer(ca)});b9.addEventListener("setmaptype",function(ca){T.setMapType(ca)});b9.addEventListener("zoomstartcode",function(ca){T._zoom(ca)})},loadTiles:function(){var T=this;if(aK.browser.ie){try{document.execCommand("BackgroundImageCache",false,true)}catch(b9){}}if(T.zoomsDiv){aK.dom.hide(T.zoomsDiv)}if(!this.loaded){T.initMapTypeTiles();this.loaded=true}T._initCenter=T.map.getCenter();T._initZoom=T.map.getZoom();T.moveGridTiles();bY.load("tile",function(){T._asyncLoadTiles()})},initMapTypeTiles:function(){var b9=this.map.getMapType();var T=b9.getTileLayer();var ca=new l();aK.extend(ca,T);this.mapTypeLayers.push(ca);ca.initialize(this.map)},showTile:function(cd,cc,cj,cg){this.centerPos=cc;var cf=this.map.getMapType();var ca=this.getTileName(cd,cg);var cn=cf.getTileSize();var cb=(cd[0]*cn)+cc[0];var cm=0;if(cf===BMAP_PERSPECTIVE_MAP&&this.map.getZoom()==15){cm=0.5}var b9=(cm-1-cd[1])*cn+cc[1];var ch=[cb,b9];var ci=this.mapTiles[ca];if(ci){if(cj){bf(ci.img,ch)}return}ci=this.bufferTiles[ca];if(ci){cg.tilesDiv.insertBefore(ci.img,cg.tilesDiv.lastChild);this.mapTiles[ca]=ci;bf(ci.img,ch);return}var cl=256*Math.pow(2,(cf.getMaxZoom()-cd[2]));var ck=new bF(cd[0]*cl,cd[1]*cl);var ce=new a4(cd[0],cd[1]);var T=cg.getTilesUrl(ce,cd[2]);ci=new bq(this,T,ch,cd,cg);this.mapTiles[ca]=ci},getTileName:function(T,b9){if(this.map.getMapType()===BMAP_PERSPECTIVE_MAP){return"TILE-"+b9.guid+"-"+this.map.cityCode+"-"+T[0]+"-"+T[1]+"-"+T[2]}else{return"TILE-"+b9.guid+"-"+T[0]+"-"+T[1]+"-"+T[2]}},hideTile:function(ca){var b9=false;var T=ca.img;if(u(T)){if(ca.loaded){b9=true}if(T.parentNode){C(T);T.parentNode.removeChild(T)}}delete this.mapTiles[ca.name];if(!b9){if(T.parentNode){C(T);T.parentNode.removeChild(T)}T=null;ca.img=null;ca.mgr=null;ca=null}},getCell:function(cc,ca){var T=getZoomFactor(ca);var cb=parseInt(cc.lng/T);var b9=parseInt(cc.lat/T);return[cb,b9,T*(cb+0.5),T*(b9+0.5)]},moveGridTiles:function(){var cx=this.mapTypeLayers;var cj=cx.concat(this.tileLayers);var cp=cj.length;for(var cr=0;cr<cp;cr++){var cc=cj[cr];if(cc.baseLayer){this.tilesDiv=cc.tilesDiv}var cD=this.map;var cz=cD.getMapType();var cE=cz.getProjection();var cq=cD.zoomLevel;var ct=cD.mercatorCenter;this.mapCenterPoint=ct;var ch=cz.getZoomUnits(cq);var ck=cz.getZoomFactor(cq);var ci=Math.ceil(ct.lng/ck);var cd=Math.ceil(ct.lat/ck);var co=cz.getTileSize();var cb=[ci,cd,(ct.lng-ci*ck)/ck*co,(ct.lat-cd*ck)/ck*co];var cy=cb[0]-Math.ceil((cD.width/2-cb[2])/co);var ca=cb[1]-Math.ceil((cD.height/2-cb[3])/co);var cu=cb[0]+Math.ceil((cD.width/2+cb[2])/co);var cm=0;if(cz===BMAP_PERSPECTIVE_MAP&&cD.getZoom()==15){cm=1}var cl=cb[1]+Math.ceil((cD.height/2+cb[3])/co)+cm;this.areaCenter=new bF(ct.lng,ct.lat);var b9=this.mapTiles;var cg=-this.areaCenter.lng/ch;var cf=this.areaCenter.lat/ch;var cB=[Math.round(cg),Math.round(cf)];for(var cC in b9){var cF=b9[cC];var cA=cF.info;if(!cA){continue}if(cA[2]==cD.zoomLevel&&(cy>cA[0]||cu<=cA[0]||ca>cA[1]||cl<=cA[1])){this.hideTile(cF)}else{if(cA[2]!=cD.zoomLevel){this.hideTile(cF)}else{if(cA[2]==cD.lastLevel){this.showTile(cA,[cB[0]*Math.pow(2,cD.zoomLevel-cD.lastLevel),cB[1]*Math.pow(2,cD.zoomLevel-cD.lastLevel)],true,cc)}}}}var ce=-cD.offsetX+cD.width/2;var cn=-cD.offsetY+cD.height/2;cc.tilesDiv.style.left=Math.round(cg+ce)-cB[0]+"px";cc.tilesDiv.style.top=Math.round(cf+cn)-cB[1]+"px";var T=[];this.imgTotalNumber=0;for(var cw=cy;cw<cu;cw++){for(var cv=ca;cv<cl;cv++){T.push([cw,cv]);this.imgTotalNumber++}}T.sort((function(cG){return function(cH,cI){return(Math.abs(cH[0]-cG[0]+cH[1]-cG[1])-Math.abs(cI[0]-cG[0]+cI[1]-cG[1]))}})([cb[0],cb[1]]));for(var cw=0,cs=T.length;cw<cs;cw++){this.showTile([T[cw][0],T[cw][1],cD.zoomLevel],cB,true,cc)}}return},addTileLayer:function(cb){var ca=this;var T=cb.target;for(var b9=0;b9<ca.tileLayers.length;b9++){if(ca.tileLayers[b9]==T){return}}ca.tileLayers.push(T)},removeTileLayer:function(cc){var cb=this;var b9=cc.target;for(var ca=0,T=cb.tileLayers.length;ca<T;ca++){if(b9==cb.tileLayers[ca]){cb.tileLayers.splice(ca,1)}}},setMapType:function(cd){var ca=this;var cb=cd.preMapType;var cc=this.mapTypeLayers;for(var b9=0,T=cc.length;b9<T;b9++){cc[b9].remove()}this.mapTypeLayers=[];this.bufferTiles=this.mapTiles={};if(ca.zoomsDiv&&ca.zoomsDiv.parentNode){ca.zoomsDiv.parentNode.removeChild(ca.zoomsDiv);ca.zoomsDiv.innerHTML="";ca.zoomsDiv=null}this.initMapTypeTiles();this.moveGridTiles()},_zoom:function(b9){var T=this;if(T.zoomsDiv){aK.dom.hide(T.zoomsDiv)}setTimeout(function(){T.moveGridTiles();T.map.dispatchEvent(new aQ("onzoomend"))},10)}});function bq(cf,T,cc,b9,cb){this.mgr=cf;this.position=cc;this.name=cf.getTileName(b9,cb);this.info=b9;var cg=N("img");bV(cg);cg.galleryImg=false;var ce=cg.style;var ca=cf.map.getMapType();ce.position="absolute";ce.border="none";ce.width=ca.getTileSize()+"px";ce.height=ca.getTileSize()+"px";ce.left=cc[0]+"px";ce.top=cc[1]+"px";this.img=cg;this.src=T;var cd=this;this.img.onload=function(cm){if(!cd.mgr){return}var ck=cd.mgr;var cn=ck.bufferTiles;if(ck.bufferNumber>0){cn[cd.name]=cd;ck.realBufferNumber++}var cp=ck.realBufferNumber-ck.bufferNumber;for(var ch in cn){if(cp<=0){break}if(!ck.mapTiles[ch]){cn[ch].mgr=null;var cl=cn[ch].img;if(cl.parentNode){C(cl);cl.parentNode.removeChild(cl)}cl=null;cn[ch].img=null;delete cn[ch];ck.realBufferNumbers--;cp--}}cd.loaded=true;if(!u(cd.img)){if(cb.tilesDiv){cb.tilesDiv.appendChild(cd.img);if(aK.browser.ie<=6&&aK.browser.ie>0&&cb.isTransparentPng()==true){var ci=cd.img.style;var cj=ci.width;var cq=ci.height;var co='position:absolute;FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+cd.src+'",sizingMethod=scale);';ci.cssText=co;ci.width=cj;ci.height=cq;ci.left=cd.position[0]+"px";ci.top=cd.position[1]+"px"}}}};this.img.onerror=function(cj){if(!cd.mgr){return}var ch=cd.mgr;cd.error=true;var ci=ch.map.getMapType();cd.img.src=ci.getErrorImageUrl();if(!u(cd.img)){cb.tilesDiv.appendChild(cd.img)}};if(aK.browser.ie<=6&&aK.browser.ie>0&&cb.isTransparentPng()==true){cg.src=bE.imgPath+"blank.gif"}else{cg.src=T}cg=null}function C(cb){if(!cb){return}var b9=cb.attributes,ca,T,cc;if(b9){T=b9.length;for(ca=0;ca<T;ca+=1){cc=b9[ca].name;if(typeof cb[cc]==="function"){cb[cc]=null}}}b9=cb.children;if(b9){T=b9.length;for(ca=0;ca<T;ca+=1){C(cb.children[ca])}}}function l(T){this.opts=T||{};this.copyright=this.opts.copyright||null;this.transparentPng=this.opts.transparentPng||false;this.baseLayer=this.opts.baseLayer||false;this.zIndex=this.opts.zIndex||0;this.guid=l._guid++}l._guid=0;aK.lang.inherits(l,aK.lang.Class,"TileLayer");aK.extend(l.prototype,{initialize:function(b9){if(this.baseLayer){this.zIndex=-1}this.map=b9;if(!this.tilesDiv){var ca=N("div");var T=ca.style;T.position="absolute";T.zIndex=this.zIndex;T.left=Math.ceil(-b9.offsetX+b9.width/2)+"px";T.top=Math.ceil(-b9.offsetY+b9.height/2)+"px";b9.platform.appendChild(ca);this.tilesDiv=ca}},remove:function(){if(this.tilesDiv&&this.tilesDiv.parentNode){this.tilesDiv.innerHTML="";this.tilesDiv.parentNode.removeChild(this.tilesDiv)}delete this.tilesDiv},isTransparentPng:function(){return this.transparentPng},getTilesUrl:function(b9,ca){var T="";if(this.opts.tileUrlTemplate){T=this.opts.tileUrlTemplate.replace(/\{X\}/,b9.x);T=T.replace(/\{Y\}/,b9.y);T=T.replace(/\{Z\}/,ca)}return T},getCopyright:function(){return this.copyright},getMapType:function(){return this.mapType||BMAP_NORMAL_MAP}});function ak(T){l.call(this,T);this._opts={};T=T||{};this._opts=aK.object.extend(this._opts,T);if(this._opts.predictDate){if(this._opts.predictDate.weekday<1||this._opts.predictDate.weekday>7){this._opts.predictDate=1}if(this._opts.predictDate.hour<0||this._opts.predictDate.hour>23){this._opts.predictDate.hour=0}}this._tileUrl="http://p{number}.map.baidu.com/traffic/"}ak.prototype=new l();ak.prototype.initialize=function(T){l.prototype.initialize.call(this,T);this._map=T};ak.prototype.isTransparentPng=function(){return true};ak.prototype.getTilesUrl=function(ce,b9){var cf="";if(this._opts.predictDate){cf="history/"+this._opts.predictDate.weekday+"/"+this._opts.predictDate.hour+"/"}var ca=this._map,cg=ce.x,cb=ce.y,cd=Math.floor(cg/200),cc=Math.floor(cb/200),T=this._tileUrl.replace("{number}",[Math.abs(cg+cb)%8])+cf+b9+"/"+cd+"/"+cc+"/"+cg+"_"+cb+".png";return T.replace(/-(\d+)/gi,"M$1")};function bT(T,b9,ca){this._name=T;this._layer=b9;this._opts={minZoom:1,maxZoom:18,tileSize:256,errorImageUrl:bE.imgPath+"blank.gif",projection:new aO(this)};b9.baseLayer=true;aK.extend(this._opts,ca||{})}aK.lang.inherits(bT,aK.lang.Class,"MapType");aK.extend(bT.prototype,{getName:function(){return this._name},getTileLayer:function(){return this._layer},getTileSize:function(){return this._opts.tileSize},getMinZoom:function(){return this._opts.minZoom},getMaxZoom:function(){return this._opts.maxZoom},getProjection:function(){return this._opts.projection},getErrorImageUrl:function(){return this._opts.errorImageUrl},getZoomUnits:function(b9){var T=this._opts;return this.getZoomFactor(b9)/T.tileSize},getZoomFactor:function(b9){var T=this._opts;return Math.pow(2,(T.maxZoom-b9))*256}});var ax=new l();ax.tileUrls=["http://q1.baidu.com/it/","http://q2.baidu.com/it/","http://q3.baidu.com/it/","http://q4.baidu.com/it/","http://q5.baidu.com/it/","http://q6.baidu.com/it/","http://q7.baidu.com/it/","http://q8.baidu.com/it/"];ax.getTilesUrl=function(cb,ce){var cf=cb.x;var cc=cb.y;var ca=Math.floor(cf/200);var b9=Math.floor(cc/200);var cd="44";if(this.map.highResolutionEnabled()){cd="41"}var T=this.tileUrls[Math.abs(cf+cc)%this.tileUrls.length]+"u=x="+cf+";y="+cc+";z="+ce+";v=004;type=web&fm="+cd;return T.replace(/-(\d+)/gi,"M$1")};window.BMAP_NORMAL_MAP=new bT("BMAP_NORMAL_MAP",ax);var a1=new l();a1.tileUrls=["http://d0.map.baidu.com/resource/mappic/","http://d1.map.baidu.com/resource/mappic/","http://d2.map.baidu.com/resource/mappic/","http://d3.map.baidu.com/resource/mappic/"];a1.getTilesUrl=function(T,ca){var cc=T.x;var b9=T.y;var cb=Math.pow(2,(20-ca))*256;b9=Math.round((9998336-cb*(b9))/cb)-1;url=this.tileUrls[Math.abs(cc+b9)%this.tileUrls.length]+this.map.currentCity+"/"+this.map.cityCode+"/3/lv"+(21-ca)+"/"+cc+","+b9+".jpg";return url};var S=new b3();window.BMAP_PERSPECTIVE_MAP=new bT("BMAP_PERSPECTIVE_MAP",a1,{minZoom:15,maxZoom:20,projection:S});BMAP_PERSPECTIVE_MAP.getCityName=function(T){if(!T){return""}var b9=bE.cityNames;for(var ca in b9){if(T.search(ca)>-1){return b9[ca]}}return""};BMAP_PERSPECTIVE_MAP.getCityCode=function(T){return({bj:2,gz:1,sz:14,sh:4})[T]};S._mapType=BMAP_PERSPECTIVE_MAP;window.BMAP_POI_TYPE_NORMAL=0;window.BMAP_POI_TYPE_BUSSTOP=1;window.BMAP_POI_TYPE_BUSLINE=2;window.BMAP_POI_TYPE_SUBSTOP=3;window.BMAP_POI_TYPE_SUBLINE=4;var A=0;var aR=1;var aX=0;var aY=1;var aI=0;var w=1;var g=2;var Y={};function q(b9,T){aK.lang.Class.call(this);this._loc={};this.setLocation(b9);this._opts={renderOptions:{panel:null,map:null,autoViewport:true},onSearchComplete:function(){},onMarkersSet:function(){},onInfoHtmlSet:function(){},onResultsHtmlSet:function(){}};aK.extend(this._opts,T);if(typeof T!="undefined"&&typeof T.renderOptions!="undefined"&&typeof T.renderOptions.autoViewport!="undefined"){this._opts.renderOptions.autoViewport=T.renderOptions.autoViewport}else{this._opts.renderOptions.autoViewport=true}this._opts.renderOptions.panel=aK.G(this._opts.renderOptions.panel)}aK.inherits(q,aK.lang.Class);aK.extend(q.prototype,{getResults:function(){return this._results},enableAutoViewport:function(){this._opts.renderOptions.autoViewport=true},disableAutoViewport:function(){this._opts.renderOptions.autoViewport=false},setLocation:function(T){if(!T){return}this._loc.src=T},setSearchCompleteCallback:function(T){this._opts.onSearchComplete=T||function(){}},setMarkersSetCallback:function(T){this._opts.onMarkersSet=T||function(){}},setInfoHtmlSetCallback:function(T){this._opts.onInfoHtmlSet=T||function(){}},setResultsHtmlSetCallback:function(T){this._opts.onResultsHtmlSet=T||function(){}},getStatus:function(){return this._status}});var aM={RawDispatcher:{},REQ_BASE_URL:"http://api.map.baidu.com/",request:function(b9,cf,T,ce){var ca=(Math.random()*100000).toFixed(0);aM.RawDispatcher["_cbk"+ca]=function(cg){T=T||{};b9&&b9(cg,T);delete aM.RawDispatcher["_cbk"+ca]};ce=ce||"";var cc=G(cf,encodeURIComponent),cd=this,cb=cd.REQ_BASE_URL+ce+"?"+cc+"&ie=utf-8&oue=1&res=api&callback=BMap.SearchRequestMgr.RawDispatcher._cbk"+ca;bW.request(cb)}};function a2(b9){var cc=false;var cb=[],cd={};for(var ca=0,T=b9.length;ca<T;ca++){if(!cd[b9[ca]]){cd[b9[ca]]=true;cb.push(b9[ca])}}return cb}function ad(ca,b9){if(b9){var T=Math.min(b9.width/1100,b9.height/660);ca=Math.round(ca+(Math.log(T)/Math.log(2)))}if(ca<1){ca=1}if(ca>18){ca=18}return ca}window.BMAP_STATUS_SUCCESS=0;window.BMAP_STATUS_CITY_LIST=1;window.BMAP_STATUS_UNKNOWN_LOCATION=2;window.BMAP_STATUS_UNKNOWN_ROUTE=3;window.BMAP_STATUS_INVALID_KEY=4;window.BMAP_STATUS_INVALID_REQUEST=5;window.BMAP_STATUS_PERMISSION_DENIED=6;window.BMAP_STATUS_SERVICE_UNAVAILABLE=7;window.BMAP_STATUS_TIMEOUT=8;window.BMAP_ROUTE_TYPE_WALKING=2;window.BMAP_ROUTE_TYPE_DRIVING=3;var bU="cur";var c="cen";var bJ="s";var W="bd";var bD="nb";var z="bt";var bj="nav";var a5="walk";var a8="gc";var d="rgc";var I="dec";var n=2;var aF=4;var a3=7;var K=11;var ar=12;var aS=14;var p=20;var H=21;var aa=26;var bc=28;var v=31;var aZ=35;var ba=44;var aC=-1;var O=0;var bP=1;var aG=2;var av=0;var a6=1;var aq=2;var b7="http://map.baidu.com/";var t="http://api.map.baidu.com/";function bo(cd,cg){if(typeof cd!="string"||!cd){return}var ci=cd.split("|");var T;var cb;var b9;if(ci.length==1){T=J(cd)}else{T=J(ci[2]);cb=J(ci[0]);b9=J(ci[1])}var ce={type:T.geoType};if(cg){switch(ce.type){case aq:var cf=new b2.Point(T.geo[0][0],T.geo[0][1]);var ch=b2.Projection.convertMC2LL(cf);ce.point=ch;ce.points=[ch];break;case a6:ce.points=[];var cj=T.geo[0];for(var cc=0,ca=cj.length-1;cc<ca;cc+=2){var ck=new b2.Point(cj[cc],cj[cc+1]);ck=b2.Projection.convertMC2LL(ck);ce.points.push(ck)}cb=new b2.Point(cb.geo[0][0],cb.geo[0][1]);b9=new b2.Point(b9.geo[0][0],b9.geo[0][1]);cb=b2.Projection.convertMC2LL(cb);b9=b2.Projection.convertMC2LL(b9);ce.bounds=new b2.Bounds(cb,b9);break;default:break}}return ce}function bg(ca){var b9=ca.split(",");var T=new b2.Point(b9[0],b9[1]);return b2.Projection.convertMC2LL(T)}var ag=["=",".","-","*"];var bt=1<<23;function J(cg){var cf=Z(cg.charAt(0));var b9=cg.substr(1);var ci=0;var T=b9.length;var cj=[];var cd=[];var ce=[];while(ci<T){if(b9.charAt(ci)==ag[0]){if((T-ci)<13){return 0}ce=bZ(b9.substr(ci,13),cj);if(ce<0){return 0}ci+=13}else{if(b9.charAt(ci)==";"){cd.push(cj.slice(0));cj.length=0;++ci}else{if((T-ci)<8){return 0}ce=aw(b9.substr(ci,8),cj);if(ce<0){return 0}ci+=8}}}for(var cc=0,ca=cd.length;cc<ca;cc++){for(var cb=0,ch=cd[cc].length;cb<ch;cb++){cd[cc][cb]/=100}}return{geoType:cf,geo:cd}}function Z(b9){var T=-1;if(b9==ag[1]){T=aq}else{if(b9==ag[2]){T=a6}else{if(b9==ag[3]){T=av}}}return T}function bZ(cb,b9){var T=0;var cd=0;var cc=0;for(var ca=0;ca<6;ca++){cc=P(cb.substr(1+ca,1));if(cc<0){return -1-ca}T+=cc<<(6*ca);cc=P(cb.substr(7+ca,1));if(cc<0){return -7-ca}cd+=cc<<(6*ca)}b9.push(T);b9.push(cd);return 0}function aw(cc,ca){var b9=ca.length;if(b9<2){return -1}var T=0;var ce=0;var cd=0;for(var cb=0;cb<4;cb++){cd=P(cc.substr(cb,1));if(cd<0){return -1-cb}T+=cd<<(6*cb);cd=P(cc.substr(4+cb,1));if(cd<0){return -5-cb}ce+=cd<<(6*cb)}if(T>bt){T=bt-T}if(ce>bt){ce=bt-ce}ca.push(ca[b9-2]+T);ca.push(ca[b9-1]+ce);return 0}function P(b9){var T=b9.charCodeAt(0);if(b9>="A"&&b9<="Z"){return T-"A".charCodeAt(0)}else{if(b9>="a"&&b9<="z"){return(26+T-"a".charCodeAt(0))}else{if(b9>="0"&&b9<="9"){return(52+T-"0".charCodeAt(0))}else{if(b9=="+"){return 62}else{if(b9=="/"){return 63}}}}}return -1}function aA(T){if(typeof T=="string"){T=parseFloat(T)}var b9;if(!T||T<0){b9="0\u7c73"}else{if(T<=10){b9="10\u7c73"}else{b9=T<1000?Math.round(T/10)*10+"\u7c73":(T/1000).toFixed(1)+"\u516c\u91cc"}}if(b9=="1000\u7c73"){b9="1.0\u516c\u91cc"}return b9}function i(cg,cb){if(!cg||isNaN(cg)){return""}var T="",b9=60,cc=b9*24;var ca=Math.ceil(cg/b9);if(cb=="bustime"){var cf=ca%10,cd=parseInt(ca/10);ca=cf!=0?(cf>5?(++cd*10):cd?(cd*10):5):ca}var ch=parseInt(ca/cc);ca%=cc;var ce=parseInt(ca/b9);ca%=b9;if(ch>=1){T+=ch+"\u5929"}if(ce>=1){T+=ce+"\u5c0f\u65f6"}if(ca>=1){if(cb&&cb=="nav"&&ch>=1){return T}else{T+=ca+"\u5206\u949f"}}return T}function ah(T){var ca=T.getSouthWest();var b9=T.getNorthEast();return[ca,b9]}b2.I=window.Instance=aK.lang.instance;var aE=function(ca,b9){q.call(this,ca,b9);b9=b9||{};b9.renderOptions=b9.renderOptions||{};this.setPageCapacity(b9.pageCapacity);if(typeof b9.renderOptions.selectFirstResult!="undefined"&&!b9.renderOptions.selectFirstResult){this.disableFirstResultSelection()}else{this.enableFirstResultSelection()}this._overlays=[];this._curIndex=-1;this._queryList=[];var T=this;bY.load("local",function(){T._check()})};aK.inherits(aE,q,"LocalSearch");aE.DEFAULT_PAGE_CAPACITY=10;aE.MIN_PAGE_CAPACITY=1;aE.MAX_PAGE_CAPACITY=50;aE.DEFAULT_RADIUS=2000;aE.MAX_RADIUS=5000;aK.extend(aE.prototype,{search:function(T){this._queryList.push({method:"search",arguments:[T]})},searchInBounds:function(T,b9){this._queryList.push({method:"searchInBounds",arguments:[T,b9]})},searchNearby:function(ca,b9,T){this._queryList.push({method:"searchNearby",arguments:[ca,b9,T]})},clearResults:function(){delete this._json;delete this._status;delete this._results;delete this._ud;this._curIndex=-1;this._setStatus();if(this._opts.renderOptions.panel){this._opts.renderOptions.panel.innerHTML=""}},gotoPage:function(){},enableFirstResultSelection:function(){this._opts.renderOptions.selectFirstResult=true},disableFirstResultSelection:function(){this._opts.renderOptions.selectFirstResult=false},setPageCapacity:function(T){if(typeof T=="number"&&!isNaN(T)){this._opts.pageCapacity=T<1?aE.DEFAULT_PAGE_CAPACITY:(T>aE.MAX_PAGE_CAPACITY?aE.DEFAULT_PAGE_CAPACITY:T)}else{this._opts.pageCapacity=aE.DEFAULT_PAGE_CAPACITY}},getPageCapacity:function(){return this._opts.pageCapacity},toString:function(){return"LocalSearch"}});var by=function(b9,T){q.call(this,b9,T);T=T||{};this.setPolylinesSetCallback(T.onPolylinesSet)};aK.inherits(by,q,"BaseRoute");aK.extend(by.prototype,{clearResults:function(){},setPolylinesSetCallback:function(T){this._opts.onPolylinesSet=T||function(){}}});window.BMAP_TRANSIT_POLICY_LEAST_TIME=0;window.BMAP_TRANSIT_POLICY_LEAST_TRANSFER=2;window.BMAP_TRANSIT_POLICY_LEAST_WALKING=3;window.BMAP_LINE_TYPE_BUS=0;window.BMAP_LINE_TYPE_SUBWAY=1;window.BMAP_LINE_TYPE_FERRY=2;function ay(ca,b9){by.call(this,ca,b9);b9=b9||{};this.setPolicy(b9.policy);this.setPageCapacity(b9.pageCapacity);this.QUERY_TYPE=z;this.RETURN_TYPE=aS;this.ROUTE_TYPE=aR;this._overlays=[];this._curIndex=-1;this._queryList=[];var T=this;bY.load("route",function(){T._asyncSearch()})}ay.MAX_PAGE_CAPACITY=5;ay.LINE_TYPE_MAPPING=[0,1,0,0,0,0,0,0,2,0,0,0,1,1,1];aK.inherits(ay,by,"TransitRoute");aK.extend(ay.prototype,{setPolicy:function(T){if(T>=BMAP_TRANSIT_POLICY_LEAST_TIME&&T<=BMAP_TRANSIT_POLICY_LEAST_WALKING){this._opts.policy=T}else{this._opts.policy=BMAP_TRANSIT_POLICY_LEAST_TIME}},search:function(b9,T){this._queryList.push({method:"search",arguments:[b9,T]})},setPageCapacity:function(T){if(typeof T=="string"){T=parseInt(T);if(isNaN(T)){this._opts.pageCapacity=ay.MAX_PAGE_CAPACITY;return}}if(typeof T!="number"){this._opts.pageCapacity=ay.MAX_PAGE_CAPACITY;return}if(T>=1&&T<=ay.MAX_PAGE_CAPACITY){this._opts.pageCapacity=Math.round(T)}else{this._opts.pageCapacity=ay.MAX_PAGE_CAPACITY}},toString:function(){return"TransitRoute"},_shortTitle:function(T){return T.replace(/\(.*\)/,"")}});function s(T){this.city=T.city;this._start=T.start;this._end=T.end;this._plans=T.plans;this.moreResultsUrl=T.url;this.taxiFare=T.taxiFare||null}aK.extend(s.prototype,{getStart:function(){return this._start},getEnd:function(){return this._end},getNumPlans:function(){return this._plans.length},getPlan:function(T){if(this._plans[T]){return this._plans[T]}}});function aJ(T){s.call(this,T);this.policy=T.policy}aK.inherits(aJ,s,"DrivingRouteResult");function bs(T){s.call(this,T)}aK.inherits(bs,s,"WalkingRouteResult");function x(T){s.call(this,T);this.policy=T.policy}aK.inherits(x,s,"TransitRouteResult");function j(T){this._routes=T.routes.slice(0);this._distance=T.distance||0;this._duration=T.duration||0}aK.extend(j.prototype,{getRoute:function(T){if(this._routes[T]){return this._routes[T]}},getNumRoutes:function(){return this._routes.length},getDistance:function(T){if(T===false){return this._distance}else{return aA(this._distance)}},getDuration:function(T){if(T===false){return this._duration}else{return i(this._duration,"nav")}}});function bL(T){j.call(this,T);this._lines=T.lines;this._description=T.description;this._duration=T.duration||0}aK.inherits(bL,j,"TransitRoutePlan");aK.extend(bL.prototype,{getNumLines:function(){return this._lines.length},getLine:function(T){if(this._lines[T]){return this._lines[T]}},getDescription:function(T){if(T===false){return this._description.replace(/<(\/)?b>/g,"")}else{return this._description}},getDuration:function(T){if(T===false){return this._duration}else{return i(this._duration,"bustime")}}});function bi(T){this._steps=T.steps&&T.steps.slice(0)||[];this._distance=T.distance||0;this._index=T.index||0;this._points=T.points.slice(0);this._planIndex=T.planIndex||0;this._rt=T.rt;if(this._distance===0&&this._points.length>2){this._points.length=2}}aK.extend(bi.prototype,{getNumSteps:function(){return this._steps.length},getStep:function(T){if(this._steps[T]){return this._steps[T]}},getDistance:function(T){if(T===false){return this._distance}else{return aA(this._distance)}},getIndex:function(){return this._index},getPolyline:function(){return this._polyline},getPath:function(){return this._points},getRouteType:function(){return this._rt},getPlanIndex:function(){return this._planIndex}});function bI(T){this.title=T.title;this.uid=T.uid;this.type=T.type;this._stops=T.stops.slice(0);this._points=T.points.slice(0);this._distance=T.distance||0;this._numViaStops=T.numViaStops||0}aK.extend(bI.prototype,{getNumViaStops:function(){return this._numViaStops},getGetOnStop:function(){return this._stops[0]},getGetOffStop:function(){return this._stops[1]},getPath:function(){return this._points},getPolyline:function(){return this._polyline},getDistance:function(T){if(T===false){return this._distance}else{return aA(this._distance)}}});function az(T){this._point=T.point;this._index=T.index;this._description=T.description;this._distance=T.distance||0;this._routeIndex=T.routeIndex||0;this._planIndex=T.planIndex||0}aK.extend(az.prototype,{getPosition:function(){return this._point},getIndex:function(){return this._index},getDescription:function(T){if(T===false){return this._description.replace(/<\/?b>/g,"")}else{return this._description}},getDistance:function(T){if(T===false){return this._distance}else{return aA(this._distance)}},getRouteIndex:function(){return this._routeIndex},getPlanIndex:function(){return this._planIndex}});var aV=function(T,ca){by.call(this,T,ca);this._overlays=[];this._curIndex=-1;this._queryList=[];var b9=this;bY.load("route",function(){b9._asyncSearch()})};aV.ROAD_TYPE=["","\u73af\u5c9b","\u65e0\u5c5e\u6027\u9053\u8def","\u4e3b\u8def","\u9ad8\u901f\u8fde\u63a5\u8def","\u4ea4\u53c9\u70b9\u5185\u8def\u6bb5","\u8fde\u63a5\u9053\u8def","\u505c\u8f66\u573a\u5185\u90e8\u9053\u8def","\u670d\u52a1\u533a\u5185\u90e8\u9053\u8def","\u6865","\u6b65\u884c\u8857","\u8f85\u8def","\u531d\u9053","\u5168\u5c01\u95ed\u9053\u8def","\u672a\u5b9a\u4e49\u4ea4\u901a\u533a\u57df","POI\u8fde\u63a5\u8def","\u96a7\u9053","\u6b65\u884c\u9053","\u516c\u4ea4\u4e13\u7528\u9053","\u63d0\u524d\u53f3\u8f6c\u9053"];aK.inherits(aV,by,"DWRoute");aK.extend(aV.prototype,{search:function(b9,T){this._queryList.push({method:"search",arguments:[b9,T]})}});window.BMAP_DRIVING_POLICY_LEAST_TIME=0;window.BMAP_DRIVING_POLICY_LEAST_DISTANCE=1;window.BMAP_DRIVING_POLICY_AVOID_HIGHWAYS=2;function m(T,b9){aV.call(this,T,b9);b9=b9||{};this.setPolicy(b9.policy);this.QUERY_TYPE=bj;this.RETURN_TYPE=p;this.ROUTE_TYPE=BMAP_ROUTE_TYPE_DRIVING;this.TRANS_INFO_WND_TYPE=w}aK.inherits(m,aV,"DrivingRoute");m.TURN_TYPE=["","\u76f4\u884c","\u53f3\u524d\u65b9\u8f6c\u5f2f","\u53f3\u8f6c","\u53f3\u540e\u65b9\u8f6c\u5f2f","\u8c03\u5934","\u5de6\u540e\u65b9\u8f6c\u5f2f","\u5de6\u8f6c","\u5de6\u524d\u65b9\u8f6c\u5f2f","\u7a0d\u5411\u5de6\u8f6c","\u76f4\u884c","\u7a0d\u5411\u53f3\u8f6c","\u6b63\u5317\u65b9\u5411","\u4e1c\u5317\u65b9\u5411","\u6b63\u4e1c\u65b9\u5411","\u4e1c\u5357\u65b9\u5411","\u6b63\u5357\u65b9\u5411","\u897f\u5357\u65b9\u5411","\u6b63\u897f\u65b9\u5411","\u897f\u5317\u65b9\u5411"];m.RET_TYPE=["","\u4ece\u8d77\u70b9\u51fa\u53d1","\u5230\u8fbe\u76ee\u7684\u5730","\u9014\u7ecf\u70b9","\u884c\u9a76"];m.IWGO=["\u5728","\u4ece","\u4ece"];m.IWTO=["","","\u79bb\u5f00"];m.PWTYPE=["\u8fc7","\u5728"];m.PSTYPE=["\u5de6\u4fa7\u7684","\u53f3\u4fa7\u7684",""];m.DWTYPE=["","\u671d"];aK.extend(m.prototype,{setPolicy:function(T){if(T>=BMAP_DRIVING_POLICY_LEAST_TIME&&T<=BMAP_DRIVING_POLICY_AVOID_HIGHWAYS){this._opts.policy=T}else{this._opts.policy=BMAP_DRIVING_POLICY_LEAST_TIME}},toString:function(){return"DrivingRoute"}});function b1(T,b9){aV.call(this,T,b9);this.QUERY_TYPE=a5;this.RETURN_TYPE=v;this.ROUTE_TYPE=BMAP_ROUTE_TYPE_WALKING;this.TRANS_INFO_WND_TYPE=g}aK.inherits(b1,aV,"WalkingRoute");b1.TURN_TYPE=["","\u76f4\u8d70","\u5411\u53f3\u524d\u65b9\u8f6c","\u53f3\u8f6c","\u5411\u53f3\u540e\u65b9\u8f6c","\u5411\u540e\u8f6c","\u5411\u5de6\u540e\u65b9\u8f6c","\u5de6\u8f6c","\u5411\u5de6\u524d\u65b9\u8f6c","\u5de6\u8f6c\u7a7f\u8fc7\u9a6c\u8def\u5e76\u7ee7\u7eed\u5411\u524d","\u53f3\u8f6c\u7a7f\u8fc7\u9a6c\u8def\u5e76\u7ee7\u7eed\u5411\u524d","\u5de6\u8f6c\u7a7f\u8fc7\u9a6c\u8def\u5e76\u5f80\u56de\u8d70","\u53f3\u8f6c\u7a7f\u8fc7\u9a6c\u8def\u5e76\u5f80\u56de\u8d70","\u6b63\u5317\u65b9\u5411","\u4e1c\u5317\u65b9\u5411","\u6b63\u4e1c\u65b9\u5411","\u4e1c\u5357\u65b9\u5411","\u6b63\u5357\u65b9\u5411","\u897f\u5357\u65b9\u5411","\u6b63\u897f\u65b9\u5411","\u897f\u5317\u65b9\u5411","","","",""];b1.RET_TYPE=["","\u4ece\u8d77\u70b9\u51fa\u53d1","\u5230\u8fbe\u76ee\u7684\u5730","\u9014\u7ecf\u70b9","\u8d70"];b1.IWGO=["\u5728","\u4ece","\u4ece"];b1.IWTO=["","","\u79bb\u5f00"];b1.PWTYPE=["\u8fc7","\u5728"];b1.PSTYPE=["\u5de6\u4fa7\u7684","\u53f3\u4fa7\u7684",""];b1.DWTYPE=["","\u671d"];aK.extend(b1.prototype,{toString:function(){return"WalkingRoute"}});function aB(b9){this._opts={};aK.extend(this._opts,b9);this._queryList=[];var T=this;bY.load("othersearch",function(){T._asyncSearch()})}aK.inherits(aB,aK.lang.Class,"Geocoder");aK.extend(aB.prototype,{getPoint:function(T,ca,b9){this._queryList.push({method:"getPoint",arguments:[T,ca,b9]})},getLocation:function(T,ca,b9){this._queryList.push({method:"getLocation",arguments:[T,ca,b9]})},toString:function(){return"Geocoder"}});function V(b9){this._opts={};aK.extend(this._opts,b9);this._queryList=[];var T=this;bY.load("othersearch",function(){T._asyncSearch()})}aK.extend(V.prototype,{getCurrentPosition:function(b9,T){this._queryList.push({method:"getCurrentPosition",arguments:[b9,T]})},getStatus:function(){return this._status},toString:function(){return"Geolocation"}});function bB(b9){this._opts={renderOptions:{map:null}};aK.extend(this._opts,b9);this._queryList=[];var T=this;bY.load("othersearch",function(){T._asyncSearch()})}aK.inherits(bB,aK.lang.Class,"LocalCity");aK.extend(bB.prototype,{get:function(T){this._queryList.push({method:"get",arguments:[T]})},toString:function(){return"LocalCity"}});function U(T,b9){window.BMap[T]=b9}window.BMap=b2;U("Map",a7);U("MapType",bT);U("Point",bF);U("Pixel",a4);U("Size",am);U("Bounds",bk);U("TileLayer",l);U("Projection",aO);U("Copyright",ae);U("Overlay",be);U("Label",R);U("Marker",Q);U("Icon",E);U("Polyline",e);U("Polygon",bM);U("InfoWindow",bm);U("Circle",a);U("Control",bO);U("NavigationControl",D);U("OverviewMapControl",b8);U("CopyrightControl",X);U("ScaleControl",bh);U("MapTypeControl",ap);U("TrafficLayer",ak);U("ContextMenu",bX);U("MenuItem",aP);U("SearchRequestMgr",aM);U("LocalSearch",aE);U("TransitRoute",ay);U("DrivingRoute",m);U("WalkingRoute",b1);U("Geocoder",aB);U("LocalCity",bB);U("Geolocation",V);})(); var _key=""